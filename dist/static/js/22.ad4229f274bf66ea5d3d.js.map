{"version":3,"sources":["webpack:///src/pages/permissions/user.vue","webpack:///./src/pages/permissions/user.vue?a220","webpack:///./src/pages/permissions/user.vue"],"names":["user","name","data","listData","dialogFormVisible","dialogFormVisiblePwd","dialogFormVisibleRole","dialogTitle","ruleForm","userName","pwd","ownPwd","roleId","rules","validator","rule","value","callback","Error","trigger","length","test","roleList","currentData","methods","addRole","this","getSysRoleList","submitForm","_this","$refs","validate","valid","_ruleForm","md5Pwd","Object","md5","$http","post","then","res","$notify","title","message","type","getSysUserList","resetFields","reset","changePassword","submitFormPwd","_this2","_ruleForm2","_currentData","id","Md5Pwd","ownMd5Pwd","sysUserId","catch","changeRole","submitFormRole","_this3","_currentData2","roleIdNew","goDisable","_this4","h","$createElement","sysStatus","status","$msgbox","style","showCancelButton","confirmButtonText","cancelButtonText","beforeClose","action","instance","done","_this5","sysUserList","result","_this6","forEach","item","label","roleName","activated","permissions_user","render","_vm","_h","_c","_self","staticClass","staticStyle","text-align","margin-bottom","attrs","span","size","on","click","_v","prop","width","scopedSlots","_u","key","fn","scope","nativeOn","$event","row","_s","visible","update:visible","ref","model","label-width","$$v","$set","expression","placeholder","data-list","slot","_l","index","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/22.ad4229f274bf66ea5d3d.js","sourcesContent":["/**\n*  Created by   阿紫\n*  On  2018/8/13\n*  Content 用户管理\n*/\n<template>\n  <div class='user'>\n    <el-col :span=\"22\" style=\"text-align:right; margin-bottom: 30px;\">\n      <el-button size=\"small\" type=\"primary\" @click=\"addRole\">创建用户</el-button>\n    </el-col>\n    <sac-table :data=\"listData\">\n      <el-table-column prop=\"name\" label=\"用户名称\"></el-table-column>\n      <el-table-column prop=\"roleName\" label=\"角色名称\"></el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\"></el-table-column>\n      <el-table-column label=\"操作\" width=\"360\">\n        <template slot-scope=\"scope\" prop=\"sysStatus\">\n          <el-button type=\"primary\" size=\"small\" @click.native=\"changePassword(scope.row)\">修改登录密码</el-button>\n          <el-button type=\"primary\" size=\"small\" @click.native=\"changeRole(scope.row)\">分配角色</el-button>\n          <el-button :type=\"scope.row.sysStatus==1?'danger':'warning'\" size=\"small\"\n                     @click.native=\"goDisable(scope.row)\">{{scope.row.sysStatus==1?'禁用':'启用'}}\n          </el-button>\n        </template>\n      </el-table-column>\n    </sac-table>\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"80px\">\n        <sac-input ref=\"userName\" v-model=\"ruleForm.userName\" label=\"用户名称\" prop=\"userName\"></sac-input>\n        <sac-input ref=\"pwd\" type=\"password\" v-model=\"ruleForm.pwd\" label=\"登录密码\" placeholder=\"请输入6-16位密码\"\n                   prop=\"pwd\"></sac-input>\n        <sac-select ref=\"roleId\" label=\"所属角色\" v-model=\"ruleForm.roleId\" prop=\"roleId\" size=\"small\"\n                    :data-list=\"roleList\"></sac-select>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\" size=\"small\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\" size=\"small\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogFormVisiblePwd\">\n      <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"180px\">\n        <sac-input type=\"password\" label=\"验证我的登录密码\" placeholder=\"我的登录密码\" v-model=\"ruleForm.ownPwd\" prop=\"ownPwd\" ref=\"ownPwd\"></sac-input>\n        <sac-input type=\"password\" ref=\"pwd\" v-model=\"ruleForm.pwd\" :label=\"`${currentData.name}的新登录密码`\"\n                   placeholder=\"请输入6-16位密码\" prop=\"pwd\"></sac-input>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisiblePwd = false\" size=\"small\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitFormPwd\" size=\"small\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogFormVisibleRole\">\n      <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"130px\">\n        <el-form-item label=\"所属角色\">\n          <el-select v-model=\"ruleForm.roleId\" placeholder=\"请选择所属角色\">\n            <el-option v-for=\"(item, index) in roleList\"\n                       size=\"small\"\n                       :label=\"item.label\"\n                       :value=\"item.value\"\n                       :key=\"index\"></el-option>\n          </el-select>\n        </el-form-item>\n\n\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleRole = false\" size=\"small\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitFormRole\" size=\"small\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n<script>\n  import Md5 from '../../../static/js/md5';\n\n  export default {\n    name: \"user\",\n    data() {\n      const checkUserName = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error('请输入用户名'));\n        }\n        callback();\n      }\n      const checkPwd = (rule, value, callback) => {\n        if (!value || value.length < 6 || value.length > 16) {\n          return callback(new Error('请输入6-16位密码'));\n        }\n        if (!/(?=.*[a-z])(?=.*\\d)(?=.*[#@!~%^&*.])[a-z\\d#@!~%^&*.]/i.test(value)) {\n          return callback(new Error('登录密码必须是字母、数字和符号的组合'));\n        }\n        callback();\n      };\n      const checkRole = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error('请输选择角色'));\n        }\n        callback();\n      }\n      return {\n        listData: [],\n        dialogFormVisible: false,\n        dialogFormVisiblePwd: false, // 修改密码\n        dialogFormVisibleRole: false, // 修改角色\n        dialogTitle: '创建用户',\n        ruleForm: {\n          userName: '',\n          pwd: '',\n          ownPwd: '',\n          roleId: '',\n        },\n        rules: {\n          userName: [\n            { validator: checkUserName, trigger: 'blur' },\n          ],\n          pwd: [\n            { validator: checkPwd, trigger: 'blur' },\n          ],\n          roleId: [\n            { validator: checkRole, trigger: 'change' },\n          ]\n        },\n        roleList: [],\n        currentData: {},\n      };\n    },\n    methods: {\n      // 创建用户\n      addRole() {\n        this.dialogTitle = '创建用户';\n        this.dialogFormVisible = true;\n        this.getSysRoleList();\n      },\n      submitForm() {\n        this.$refs.ruleForm.validate((valid) => {\n          if (valid) {\n            const { roleId, userName, pwd } = this.ruleForm;\n            const md5Pwd = Md5(pwd);\n            this.$http.post('wallet/backmgr/sysuser/addSysUser.do', {\n              roleId,\n              userName,\n              md5Pwd\n            }).then((res) => {\n              this.$notify({\n                title: '成功',\n                message: `创建用户${userName}成功`,\n                type: 'success'\n              });\n              this.getSysUserList();\n            })\n            // 重置\n            this.$refs.ruleForm.resetFields();\n            this.$refs.userName.reset();\n            this.$refs.pwd.reset();\n            this.$refs.roleId.reset();\n            this.dialogFormVisible = false;\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      // 修改密码\n      changePassword(data) {\n        this.dialogTitle = `修改 ${data.name} 的用户密码`;\n        this.dialogFormVisiblePwd = true;\n        this.currentData = data;\n      },\n      submitFormPwd() {\n        this.$refs.ruleForm.validate((valid) => {\n          if (valid) {\n            const { pwd, ownPwd } = this.ruleForm;\n            const { id, name } = this.currentData;\n            const Md5Pwd = Md5(pwd);\n            const ownMd5Pwd = Md5(ownPwd);\n            this.$http.post('wallet/backmgr/sysuser/changeSysUserPwd.do', {\n              sysUserId: id,\n              Md5Pwd,\n              ownMd5Pwd,\n            }).then((res) => {\n              this.$notify({\n                title: '成功',\n                message: `修改用户 ${name} 的密码成功`,\n                type: 'success'\n              });\n            }).catch((res) => {\n              console.error(res);\n            })\n            // 重置\n            this.$refs.ruleForm.resetFields();\n            this.$refs.pwd.reset();\n            this.$refs.ownPwd.reset();\n            this.dialogFormVisiblePwd = false;\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        })\n      },\n      // 修改角色\n      changeRole(data) {\n        this.dialogTitle = `修改 ${data.name} 的用户角色`;\n        this.dialogFormVisibleRole = true;\n        this.currentData = data;\n        this.ruleForm.roleId = data.roleId || '';\n        this.getSysRoleList();\n      },\n      submitFormRole() {\n        this.$refs.ruleForm.validate((valid) => {\n          if (valid) {\n            const { id, name, roleId } = this.currentData;\n            const roleIdNew = this.ruleForm.roleId;\n            if (roleId != roleIdNew) {\n              this.$http.post('wallet/backmgr/privilege/setSysRole.do', {\n                sysUserId: id,\n                roleId: roleIdNew,\n              }).then((res) => {\n                this.$notify({\n                  title: '成功',\n                  message: `修改用户 ${name} 的角色成功`,\n                  type: 'success'\n                });\n                this.getSysUserList();\n              })\n            }\n            // 重置\n            this.$refs.ruleForm.resetFields();\n            this.dialogFormVisibleRole = false;\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        })\n      },\n      // 解禁&启用\n      goDisable(data) {\n        const h = this.$createElement;\n        const { sysStatus, name, id } = data;\n        const status = sysStatus == 1 ? 0 : 1;\n        this.$msgbox({\n          title: '提示',\n          message: h('p', null, [\n            h('span', null, '此操作将 '),\n            h('span', { style: 'color: red' }, sysStatus == 1 ? `禁用 ` : `启用 `),\n            h('span', { style: 'color: #0a52e0' }, `${name}`),\n            h('span', null, ' 用户, 是否继续?'),\n          ]),\n          showCancelButton: true,\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          beforeClose: (action, instance, done) => {\n            if (action === 'confirm') {\n              this.$http.post('wallet/backmgr/sysuser/updateSysUserStatus.do', {\n                sysUserId: id,\n                status,\n              }).then((res) => {\n                this.$notify({\n                  title: '成功',\n                  message: `${sysStatus == 1 ? '禁用' : '启用'} ${name} 成功`,\n                  type: 'success'\n                });\n                this.getSysUserList();\n                done();\n              })\n            } else {\n              done();\n            }\n          }\n        })\n      },\n      // 获取用户列表\n      getSysUserList() {\n        this.$http.post('wallet/backmgr/privilege/getSysUserList.do').then((res) => {\n          const { sysUserList } = res.result;\n          this.listData = sysUserList;\n        })\n      },\n      // 获取角色\n      getSysRoleList() {\n        if (!this.roleList.length) {\n          this.$http.post('wallet/backmgr/privilege/getSysRoleList.do').then((res) => {\n            const { roleList } = res.result;\n            roleList.forEach((item) => {\n              item.label = item.roleName;\n              item.value = item.roleId;\n            })\n            this.roleList = roleList;\n          })\n        }\n      },\n    },\n    activated() {\n      this.getSysUserList();\n    }\n  };\n</script>\n<style lang=\"less\">\n  .user {\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/permissions/user.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user\"},[_c('el-col',{staticStyle:{\"text-align\":\"right\",\"margin-bottom\":\"30px\"},attrs:{\"span\":22}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.addRole}},[_vm._v(\"创建用户\")])],1),_vm._v(\" \"),_c('sac-table',{attrs:{\"data\":_vm.listData}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"用户名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"360\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.changePassword(scope.row)}}},[_vm._v(\"修改登录密码\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.changeRole(scope.row)}}},[_vm._v(\"分配角色\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":scope.row.sysStatus==1?'danger':'warning',\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.goDisable(scope.row)}}},[_vm._v(_vm._s(scope.row.sysStatus==1?'禁用':'启用')+\"\\n        \")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('sac-input',{ref:\"userName\",attrs:{\"label\":\"用户名称\",\"prop\":\"userName\"},model:{value:(_vm.ruleForm.userName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"userName\", $$v)},expression:\"ruleForm.userName\"}}),_vm._v(\" \"),_c('sac-input',{ref:\"pwd\",attrs:{\"type\":\"password\",\"label\":\"登录密码\",\"placeholder\":\"请输入6-16位密码\",\"prop\":\"pwd\"},model:{value:(_vm.ruleForm.pwd),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"pwd\", $$v)},expression:\"ruleForm.pwd\"}}),_vm._v(\" \"),_c('sac-select',{ref:\"roleId\",attrs:{\"label\":\"所属角色\",\"prop\":\"roleId\",\"size\":\"small\",\"data-list\":_vm.roleList},model:{value:(_vm.ruleForm.roleId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleId\", $$v)},expression:\"ruleForm.roleId\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.dialogFormVisiblePwd},on:{\"update:visible\":function($event){_vm.dialogFormVisiblePwd=$event}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"180px\"}},[_c('sac-input',{ref:\"ownPwd\",attrs:{\"type\":\"password\",\"label\":\"验证我的登录密码\",\"placeholder\":\"我的登录密码\",\"prop\":\"ownPwd\"},model:{value:(_vm.ruleForm.ownPwd),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ownPwd\", $$v)},expression:\"ruleForm.ownPwd\"}}),_vm._v(\" \"),_c('sac-input',{ref:\"pwd\",attrs:{\"type\":\"password\",\"label\":((_vm.currentData.name) + \"的新登录密码\"),\"placeholder\":\"请输入6-16位密码\",\"prop\":\"pwd\"},model:{value:(_vm.ruleForm.pwd),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"pwd\", $$v)},expression:\"ruleForm.pwd\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogFormVisiblePwd = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.submitFormPwd}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.dialogFormVisibleRole},on:{\"update:visible\":function($event){_vm.dialogFormVisibleRole=$event}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"130px\"}},[_c('el-form-item',{attrs:{\"label\":\"所属角色\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择所属角色\"},model:{value:(_vm.ruleForm.roleId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleId\", $$v)},expression:\"ruleForm.roleId\"}},_vm._l((_vm.roleList),function(item,index){return _c('el-option',{key:index,attrs:{\"size\":\"small\",\"label\":item.label,\"value\":item.value}})}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogFormVisibleRole = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.submitFormRole}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-720fda23\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/permissions/user.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-720fda23\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./user.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-720fda23\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./user.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/permissions/user.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}