webpackJsonp([26],{"2eo0":function(r,e){},N55x:function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("3cXf"),l=t.n(a),s={name:"identity-modify",data:function(){return{details:{},ruleForm:{userId:"",realName:"",cardNo:"",frontUrl:"",backUrl:"",antiUrl:""},server_path:"",rules:{realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],cardNo:[{required:!0,message:"请输入身份证号",trigger:"blur"}],frontUrl:[{required:!0,message:"身份证正面照片必须上传",trigger:"blur"}],backUrl:[{required:!0,message:"身份证反面照片必须上传",trigger:"blur"}],antiUrl:[{required:!0,message:"手持照片必须上传",trigger:"blur"}]},upData:{userInfo:"img",type:"userInfo"}}},methods:{resetForm:function(){this.ruleForm.contractadres="",this.$refs.ruleForm.resetFields()},saveData:function(){var r=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;var t=JSON.parse(l()(r.ruleForm)),a=JSON.parse(l()(r.$route.params));r.$http.post("wallet/backmgr/user/updateUserInfo",t).then(function(e){r.$notify({title:"成功",message:r.details.phone+" 修改成功",type:"success"}),a.cardFrontUrl=t.frontUrl,a.cardBackUrl=t.backUrl,a.antiMoneyUrl=t.antiUrl,a.realName=t.realName,a.cardNo=t.cardNo,setTimeout(function(){r.$router.push({name:"identityDetails",params:a})},1e3)})})},beforeAvatarUpload:function(r){var e="image/jpeg"==r.type||"image/png"==r.type;return e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),e},frontUrlSuccess:function(r,e,t){this.ruleForm.frontUrl=r.result.urls[0]},backUrlSuccess:function(r,e,t){this.ruleForm.backUrl=r.result.urls[0]},antiUrlSuccess:function(r,e,t){this.ruleForm.antiUrl=r.result.urls[0]},goBack:function(){this.$router.go(-1)}},activated:function(){this.resetForm(),this.server_path=SERVER_PATH,this.$route.params.userId?(this.ruleForm.userId=this.$route.params.userId,this.ruleForm.realName=this.$route.params.realName,this.ruleForm.cardNo=this.$route.params.cardNo,this.ruleForm.frontUrl=this.$route.params.cardFrontUrl,this.ruleForm.backUrl=this.$route.params.cardBackUrl,this.ruleForm.antiUrl=this.$route.params.antiMoneyUrl,this.details=JSON.parse(l()(this.ruleForm)),this.details.phone=this.$route.params.phone):this.$router.go(-1)}},o={render:function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"identity-modify"},[t("el-row",{staticStyle:{"margin-bottom":"30px"}},[t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[t("el-button",{staticClass:"refuse-btn",attrs:{type:"danger",size:"small"},nativeOn:{click:function(e){return r.saveData()}}},[r._v("保存\n      ")]),r._v(" "),t("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(e){return r.goBack()}}},[r._v("取消\n      ")])],1)],1),r._v(" "),t("el-form",{ref:"ruleForm",attrs:{model:r.ruleForm,rules:r.rules,inline:!0,"label-width":"140px"}},[t("el-form-item",{attrs:{label:"账号:"}},[t("span",[r._v(r._s(r.details.phone))])]),r._v(" "),t("el-form-item",{attrs:{label:"姓名:",prop:"realName"}},[t("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入姓名"},model:{value:r.ruleForm.realName,callback:function(e){r.$set(r.ruleForm,"realName",e)},expression:"ruleForm.realName"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"身份证号码:",prop:"cardNo"}},[t("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入姓名"},model:{value:r.ruleForm.cardNo,callback:function(e){r.$set(r.ruleForm,"cardNo",e)},expression:"ruleForm.cardNo"}})],1),r._v(" "),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"身份证正面照片:",prop:"frontUrl"}},[t("div",{staticClass:"attention",attrs:{slot:"tip"},slot:"tip"},[r._v("*证件照在有效期内，照片文字清晰可见，图片格式支持jpg/png")]),r._v(" "),t("el-upload",{staticClass:"avatar-uploader",attrs:{action:r.server_path+"wallet/backmgr/uploadFile",name:"files",data:r.upData,"show-file-list":!1,"on-success":r.frontUrlSuccess,"before-upload":r.beforeAvatarUpload}},[r.ruleForm.frontUrl?t("img",{attrs:{src:r.ruleForm.frontUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),r._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"身份证反面照片:",prop:"backUrl"}},[t("div",{staticClass:"attention",attrs:{slot:"tip"},slot:"tip"},[r._v("*证件照在有效期内，照片文字清晰可见，图片格式支持jpg/png")]),r._v(" "),t("el-upload",{staticClass:"avatar-uploader",attrs:{action:r.server_path+"wallet/backmgr/uploadFile",name:"files",data:r.upData,"show-file-list":!1,"on-success":r.backUrlSuccess,"before-upload":r.beforeAvatarUpload}},[r.ruleForm.backUrl?t("img",{staticClass:"right-img",attrs:{src:r.ruleForm.backUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),r._v(" "),t("el-form-item",{attrs:{label:"手持照片:",prop:"antiUrl"}},[t("div",{staticClass:"attention",attrs:{slot:"tip"},slot:"tip"},[r._v("*证件照在有效期内，照片文字清晰可见，图片格式支持jpg/png")]),r._v(" "),t("el-upload",{staticClass:"avatar-uploader",attrs:{action:r.server_path+"wallet/backmgr/uploadFile",name:"files",data:r.upData,"show-file-list":!1,"on-success":r.antiUrlSuccess,"before-upload":r.beforeAvatarUpload}},[r.ruleForm.antiUrl?t("img",{staticClass:"right-img",attrs:{src:r.ruleForm.antiUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)},staticRenderFns:[]};var i=t("C7Lr")(s,o,!1,function(r){t("2eo0")},null,null);e.default=i.exports}});