webpackJsonp([60],{"8/xH":function(e,l){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: Cannot find module 'tslib'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:594:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:520:25)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\dist\\less.cjs.js:3:13)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:551:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:543:3)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\index.js:1:80)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:195:19)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:367:11\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:172:11\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:32:11)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:365:2)\n    at NormalModule.doBuild (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:182:3)\n    at NormalModule.build (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:275:15)")},GCs9:function(e,l,r){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t={name:"collect-alarm",data:function(){return{list:[],alarmlist:[],ruleForm:{phone:"",rtype:"",name:"",IntervalTime:""},dialogTitle:"",dialogFormVisible:!1,rules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],rtype:[{required:!0,message:"请选择",trigger:"change"}],IntervalTime:[{required:!0,message:"请输入时间间隔",trigger:"blur"},{validator:function(e,l,r){/^[0-9]+.?[0-9]*$/.test(l)?r():r(new Error(e.message))},message:"时间间隔必须为数字"}]}}},methods:{resetForm:function(){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},getAlarmList:function(){var e=this,l=this.pageNum,r=this.pageSize;this.$http.post("wallet/backmgr/alarm/getAlarmList",{pageNum:l,pageSize:r}).then(function(l){var r=l.result.list;e.list=r})},remove:function(e){var l=this;this.$confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.$http.post("wallet/backmgr/alarm/deleteAlarm",{id:e}).then(function(e){l.$notify({title:"成功",message:"删除成功",type:"success"}),l.getAlarmList()})})},handleStatus:function(e,l){var r=this,t={id:e,activeStatus:1==l?0:1};this.$http.post("wallet/backmgr/alarm/addOrUpdateAlarm",t).then(function(e){r.$notify({title:"成功",message:(1==l?"暂停":"生效")+"成功",type:"success"}),r.getAlarmList()})},getSysAlarmType:function(){var e=this;this.alarmlist.length||this.$http.post("/wallet/backmgr/alarm/getSysAlarmType",{}).then(function(l){e.alarmlist=l.result.list})},addSend:function(){this.dialogTitle="创建告警短信",this.dialogFormVisible=!0,this.getSysAlarmType(),this.resetForm()},determine:function(){var e=this;this.$refs.ruleForm.validate(function(l){if(!l)return!1;e.$http.post("wallet/backmgr/alarm/addOrUpdateAlarm",e.ruleForm).then(function(l){e.$notify({title:"成功",message:"创建成功",type:"success"}),e.dialogFormVisible=!1,e.getAlarmList()})})}},activated:function(){this.getAlarmList()}},a={render:function(){var e=this,l=e.$createElement,r=e._self._c||l;return r("div",{staticClass:"collect-alarm"},[r("el-col",{staticStyle:{"text-align":"right","margin-bottom":"30px"},attrs:{span:22}},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addSend}},[e._v("创建告警短信")])],1),e._v(" "),r("sac-table",{attrs:{data:e.list}},[r("el-table-column",{attrs:{prop:"id",label:"序号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"用户姓名"}}),e._v(" "),r("el-table-column",{attrs:{label:"邮件类型"},scopedSlots:e._u([{key:"default",fn:function(l){return[0==l.row.rtype?r("span",[e._v("审核告警")]):e._e(),e._v(" "),1==l.row.rtype?r("span",[e._v("上链异常")]):e._e(),e._v(" "),2==l.row.rtype?r("span",[e._v("到账延时")]):e._e(),e._v(" "),3==l.row.rtype?r("span",[e._v("商户余额")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"intervalTime",label:"发送间隔"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(l){return[r("el-button",{attrs:{type:1==l.row.activeStatus?"danger":"primary",size:"small"},nativeOn:{click:function(r){return e.handleStatus(l.row.id,l.row.activeStatus)}}},[e._v(e._s(1==l.row.activeStatus?"暂停":"生效")+"\n        ")]),e._v(" "),r("el-button",{attrs:{type:"success",size:"small"},nativeOn:{click:function(r){return e.remove(l.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(l){e.dialogFormVisible=l}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[r("el-form-item",{attrs:{label:"手机号码：",prop:"phone"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入手机号码"},model:{value:e.ruleForm.phone,callback:function(l){e.$set(e.ruleForm,"phone",l)},expression:"ruleForm.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"告警类型:",prop:"rtype"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.ruleForm.rtype,callback:function(l){e.$set(e.ruleForm,"rtype",l)},expression:"ruleForm.rtype"}},e._l(e.alarmlist,function(e,l){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"用户姓名："}},[r("el-input",{attrs:{size:"small",placeholder:"请输入用户姓名"},model:{value:e.ruleForm.name,callback:function(l){e.$set(e.ruleForm,"name",l)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"发生间隔：",prop:"Intervals"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{size:"small",placeholder:"请输入发生间隔"},model:{value:e.ruleForm.IntervalTime,callback:function(l){e.$set(e.ruleForm,"IntervalTime",l)},expression:"ruleForm.IntervalTime"}}),e._v(" "),r("span",{staticStyle:{"margin-left":"10px"}},[e._v(" 分钟")])],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(l){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.determine}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=r("C7Lr")(t,a,!1,function(e){r("8/xH")},null,null);l.default=n.exports}});