webpackJsonp([48],{P2ra:function(t,e){},SHJx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("4YfN"),i=a.n(l),s=a("48sp"),o={data:function(){return{filterForm:{coinName:"USDT"},detaileData:{otcFee:""},quota:{assetCertification:"",payType:""},OtcPayList:[],currentItem:{payType:1,buyRate:"",saleRate:"",rank:1},rateDetaile:[],atobLimitNum:0,atobLimitMin:0,atobLimitMax:0}},activated:function(){this.queryOtcCoinConfig(),this.getDefaultRate()},methods:{updateDefaultRate:function(){var t=this,e={buyRate:Math.floor(100*this.currentItem.buyRate)/1e4||-1,saleRate:Math.floor(100*this.currentItem.saleRate)/1e4||-1,totalBuyRate:Math.floor(100*this.rateDetaile[0].totalBuyRate)/1e4,totalSaleRate:Math.floor(100*this.rateDetaile[0].totalSaleRate)/1e4,payType:this.currentItem.payType,rank:1};this.$http.post("/wallet/invite/backmgr/updateDefaultRate",e).then(function(e){200==e.code&&(t.$message({type:"success",message:e.msg}),t.getDefaultRate())})},getDefaultRate:function(){var t=this;this.$http.post("/wallet/invite/backmgr/getDefaultRate",{payType:this.currentItem.payType,rank:this.currentItem.rank}).then(function(e){if(200==e.code){if(e.result.forEach(function(t){t.totalBuyRate=Math.floor(1e4*t.totalBuyRate)/100,t.totalSaleRate=Math.floor(1e4*t.totalSaleRate)/100,t.saleRate=Math.floor(1e4*t.saleRate)/100,t.buyRate=Math.floor(1e4*t.buyRate)/100}),e.result.length>1){var a=!0,l=!0,i=e.result[0].saleRate,s=e.result[0].buyRate;t.currentItem.saleRate="",t.currentItem.buyRate="",e.result.forEach(function(t){a=!(!a||i!=t.saleRate),l=!(!l||s!=t.buyRate)}),a&&(t.currentItem.saleRate=i),l&&(t.currentItem.buyRate=s)}else t.currentItem.saleRate=e.result[0].saleRate,t.currentItem.buyRate=e.result[0].buyRate;t.rateDetaile=e.result}})},queryOtcCoinConfig:function(){var t=this;this.$http.post("/wallet/app/otc/backmgr/queryOtcCoinConfig",{coinName:this.filterForm.coinName}).then(function(e){200==e.code&&(t.detaileData=e.result.coinInfo,t.atobLimitNum=e.result.atobLimitNum,t.atobLimitMin=e.result.atobLimitMin,t.atobLimitMax=e.result.atobLimitMax,t.OtcPayList=[],e.result.OtcPayList.forEach(function(e,a){t.OtcPayList.push({description:e.description,value:1*e.payType,assetCertification:e.assetCertification})}),""==t.quota.payType&&(t.quota.payType=t.OtcPayList[0].value,t.quota.assetCertification=t.OtcPayList[0].assetCertification))})},assetCertificationChange:function(t){this.quota.assetCertification=this.OtcPayList[t-1].assetCertification},UpdateOtcCoinConfig:function(){var t=this;this.$http.post("/wallet/app/otc/backmgr/UpdateOtcCoinConfig",{coinId:this.detaileData.coinId,deposit:this.detaileData.deposit,otcFee:this.detaileData.otcFee,sysMatchMin:this.detaileData.sysMatchMin,sysMatchMax:this.detaileData.sysMatchMax,sysCashoutMin:this.detaileData.sysCashoutMin,sysCashoutMax:this.detaileData.sysCashoutMax,assetCertification:this.quota.assetCertification,payType:this.quota.payType,atobLimitNum:this.atobLimitNum,atobLimitMin:this.atobLimitMin,atobLimitMax:this.atobLimitMax}).then(function(e){200==e.code?(t.$notify({title:"成功",message:"修改成功",type:"success"}),t.queryOtcCoinConfig()):t.$notify.error({title:"提示",message:e.msg})})}},watch:{},computed:i()({},Object(s.b)(["coinInfo"]))},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"LegalCurrencySetting-page"},[a("div",{staticClass:"title"},[a("h2",[t._v("法币设置")]),t._v(" "),a("div",{staticClass:"select-wrap"},[a("label",[t._v("币种：")]),t._v(" "),a("el-select",{attrs:{size:"small"},on:{change:t.queryOtcCoinConfig},model:{value:t.filterForm.coinName,callback:function(e){t.$set(t.filterForm,"coinName",e)},expression:"filterForm.coinName"}},t._l(t.coinInfo,function(t,e){return a("el-option",{key:e,attrs:{value:t.coinName,label:t.coinName}})}),1)],1)]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("h4",[t._v("普通交易设置")]),t._v(" "),a("el-form",{ref:"filterForm",attrs:{"label-width":"60px",size:"mini"}},[a("el-form-item",{attrs:{label:"手续费:"}},[a("el-input",{attrs:{placeholder:"请输入手续费"},model:{value:t.detaileData.otcFee,callback:function(e){t.$set(t.detaileData,"otcFee",e)},expression:"detaileData.otcFee"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"保证金:"}},[a("el-input",{attrs:{placeholder:"请输入保证金"},model:{value:t.detaileData.deposit,callback:function(e){t.$set(t.detaileData,"deposit",e)},expression:"detaileData.deposit"}})],1)],1),t._v(" "),a("h4",[t._v("码商接单额度全局设置")]),t._v(" "),a("el-form",{ref:"filterForm",attrs:{"label-width":"140px",size:"mini"}},[a("el-form-item",{attrs:{label:"全局兑出范围:"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.detaileData.sysMatchMin,callback:function(e){t.$set(t.detaileData,"sysMatchMin",e)},expression:"detaileData.sysMatchMin"}},[a("template",{slot:"append"},[t._v(t._s(t.filterForm.coinName))])],2),t._v(" "),a("span",[t._v("　~　")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.detaileData.sysMatchMax,callback:function(e){t.$set(t.detaileData,"sysMatchMax",e)},expression:"detaileData.sysMatchMax"}},[a("template",{slot:"append"},[t._v(t._s(t.filterForm.coinName))])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"全局兑入范围:"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.detaileData.sysCashoutMin,callback:function(e){t.$set(t.detaileData,"sysCashoutMin",e)},expression:"detaileData.sysCashoutMin"}},[a("template",{slot:"append"},[t._v(t._s(t.filterForm.coinName))])],2),t._v(" "),a("span",[t._v("　~　")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.detaileData.sysCashoutMax,callback:function(e){t.$set(t.detaileData,"sysCashoutMax",e)},expression:"detaileData.sysCashoutMax"}},[a("template",{slot:"append"},[t._v(t._s(t.filterForm.coinName))])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.UpdateOtcCoinConfig}},[t._v("保存修改")])],1)],1)],1),t._v(" "),a("h3",[t._v("返佣设置")]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[t.rateDetaile.length>0?a("el-form",{ref:"filterForm",attrs:{"label-width":"160px",size:"mini"}},[a("el-form-item",{attrs:{label:"全局最大兑出返佣比例:"}},[a("el-input",{attrs:{placeholder:"未设置默认0.7%"},model:{value:t.rateDetaile[0].totalBuyRate,callback:function(e){t.$set(t.rateDetaile[0],"totalBuyRate",e)},expression:"rateDetaile[0].totalBuyRate"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("span",[t._v("设置后返佣比例之和不可超过该值")])],1),t._v(" "),a("el-form-item",{attrs:{label:"全局最大兑入返佣比例:"}},[a("el-input",{attrs:{placeholder:"未设置默认0.2%"},model:{value:t.rateDetaile[0].totalSaleRate,callback:function(e){t.$set(t.rateDetaile[0],"totalSaleRate",e)},expression:"rateDetaile[0].totalSaleRate"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("span",[t._v("设置后返佣比例之和不可超过该值")])],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"支付通道:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getDefaultRate},model:{value:t.currentItem.payType,callback:function(e){t.$set(t.currentItem,"payType",e)},expression:"currentItem.payType"}},[a("el-option",{attrs:{label:"全部",value:0}}),t._v(" "),a("el-option",{attrs:{label:"银行卡",value:1}}),t._v(" "),a("el-option",{attrs:{label:"支付宝",value:2}}),t._v(" "),a("el-option",{attrs:{label:"微信",value:3}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"默认返佣兑入返佣比例:"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.currentItem.saleRate,callback:function(e){t.$set(t.currentItem,"saleRate",e)},expression:"currentItem.saleRate"}},[a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"默认返佣兑出返佣比例:"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.currentItem.buyRate,callback:function(e){t.$set(t.currentItem,"buyRate",e)},expression:"currentItem.buyRate"}},[a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),0==t.currentItem.payType?a("el-form-item",{staticClass:"showList",attrs:{label:""}},[t.rateDetaile.length>1?a("div",{staticClass:"item"},[a("span",[t._v("银行卡兑入返佣比例："),a("b",[t._v(t._s(t.rateDetaile[0].saleRate)+"%")])]),t._v(" "),a("span",[t._v("银行卡兑出返佣比例："),a("b",[t._v(t._s(t.rateDetaile[0].buyRate)+"%")])])]):t._e(),t._v(" "),t.rateDetaile.length>1?a("div",{staticClass:"item"},[a("span",[t._v("支付宝兑入返佣比例："),a("b",[t._v(t._s(t.rateDetaile[1].saleRate)+"%")])]),t._v(" "),a("span",[t._v("支付宝兑出返佣比例："),a("b",[t._v(t._s(t.rateDetaile[1].buyRate)+"%")])])]):t._e(),t._v(" "),t.rateDetaile.length>1?a("div",{staticClass:"item"},[a("span",[t._v("微信兑入返佣比例："),a("b",[t._v(t._s(t.rateDetaile[2].saleRate)+"%")])]),t._v(" "),a("span",[t._v("微信兑出返佣比例："),a("b",[t._v(t._s(t.rateDetaile[2].buyRate)+"%")])])]):t._e()]):t._e(),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.updateDefaultRate}},[t._v("保存")])],1)],1):t._e()],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(o,r,!1,function(t){a("P2ra")},"data-v-66b6ea86",null);e.default=n.exports}});