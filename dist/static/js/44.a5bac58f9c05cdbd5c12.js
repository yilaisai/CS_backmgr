webpackJsonp([44],{tEOW:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("mvHQ"),s=e.n(a),l={name:"identity-modify",data:function(){return{details:{},ruleForm:{userId:"",realName:"",cardNo:"",frontUrl:"",backUrl:"",antiUrl:""},server_path:"",rules:{realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],cardNo:[{required:!0,message:"请输入身份证号",trigger:"blur"}],frontUrl:[{required:!0,message:"身份证正面照片必须上传",trigger:"blur"}],backUrl:[{required:!0,message:"身份证反面照片必须上传",trigger:"blur"}],antiUrl:[{required:!0,message:"手持照片必须上传",trigger:"blur"}]},upData:{userInfo:"img",type:"userInfo"}}},methods:{resetForm:function(){this.ruleForm.contractadres="",this.$refs.ruleForm.resetFields()},saveData:function(){var t=this;this.$refs.ruleForm.validate(function(r){if(!r)return!1;var e=JSON.parse(s()(t.ruleForm));t.$http.post("wallet/backmgr/user/updateUserInfo.do",e).then(function(r){t.$notify({title:"成功",message:t.details.phone+" 修改成功",type:"success"}),setTimeout(function(){t.$router.push({path:"/identity"})},1e3)})})},beforeAvatarUpload:function(t){var r="image/jpeg"==t.type||"image/png"==t.type;return r||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r},frontUrlSuccess:function(t,r,e){this.ruleForm.frontUrl=t.result.urls[0]},backUrlSuccess:function(t,r,e){this.ruleForm.backUrl=t.result.urls[0]},antiUrlSuccess:function(t,r,e){this.ruleForm.antiUrl=t.result.urls[0]},goBack:function(){this.$router.push({name:"identityDetails",params:this.$route.params})}},activated:function(){this.resetForm(),this.server_path=SERVER_PATH,this.$route.params.userId?(this.ruleForm.userId=this.$route.params.userId,this.ruleForm.realName=this.$route.params.realName,this.ruleForm.cardNo=this.$route.params.cardNo,this.ruleForm.frontUrl=this.$route.params.cardFrontUrl,this.ruleForm.backUrl=this.$route.params.cardFrontUrl,this.ruleForm.antiUrl=this.$route.params.antiMoneyUrl,this.details=JSON.parse(s()(this.ruleForm)),this.details.phone=this.$route.params.phone):this.$router.go(-1)}},o={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"identity-modify"},[e("el-row",{staticStyle:{"margin-bottom":"30px"}},[e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[e("el-button",{staticClass:"refuse-btn",attrs:{type:"danger",size:"small"},nativeOn:{click:function(r){t.saveData()}}},[t._v("保存\n      ")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(r){t.goBack()}}},[t._v("取消\n      ")])],1)],1),t._v(" "),e("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,inline:!0,"label-width":"140px"}},[e("el-form-item",{attrs:{label:"账号:"}},[e("span",[t._v(t._s(t.details.phone))])]),t._v(" "),e("el-form-item",{attrs:{label:"姓名:",prop:"realName"}},[e("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入姓名"},model:{value:t.ruleForm.realName,callback:function(r){t.$set(t.ruleForm,"realName",r)},expression:"ruleForm.realName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"身份证号码:",prop:"cardNo"}},[e("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入姓名"},model:{value:t.ruleForm.cardNo,callback:function(r){t.$set(t.ruleForm,"cardNo",r)},expression:"ruleForm.cardNo"}})],1),t._v(" "),e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"身份证正面照片:",prop:"frontUrl"}},[e("div",{staticClass:"attention",attrs:{slot:"tip"},slot:"tip"},[t._v("*证件照在有效期内，照片文字清晰可见，图片格式支持jpg/png")]),t._v(" "),e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.server_path+"wallet/util/open/uploadFile.do",name:"files",data:t.upData,"show-file-list":!1,"on-success":t.frontUrlSuccess,"before-upload":t.beforeAvatarUpload}},[t.ruleForm.frontUrl?e("img",{attrs:{src:t.ruleForm.frontUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"身份证反面照片:",prop:"frontUrl"}},[e("div",{staticClass:"attention",attrs:{slot:"tip"},slot:"tip"},[t._v("*证件照在有效期内，照片文字清晰可见，图片格式支持jpg/png")]),t._v(" "),e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.server_path+"wallet/util/open/uploadFile.do",name:"files",data:t.upData,"show-file-list":!1,"on-success":t.backUrlSuccess,"before-upload":t.beforeAvatarUpload}},[t.ruleForm.backUrl?e("img",{staticClass:"right-img",attrs:{src:t.ruleForm.backUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"手持照片:",prop:"frontUrl"}},[e("div",{staticClass:"attention",attrs:{slot:"tip"},slot:"tip"},[t._v("*证件照在有效期内，照片文字清晰可见，图片格式支持jpg/png")]),t._v(" "),e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.server_path+"wallet/util/open/uploadFile.do",name:"files",data:t.upData,"show-file-list":!1,"on-success":t.antiUrlSuccess,"before-upload":t.beforeAvatarUpload}},[t.ruleForm.antiUrl?e("img",{staticClass:"right-img",attrs:{src:t.ruleForm.antiUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)},staticRenderFns:[]};var i=e("VU/8")(l,o,!1,function(t){e("zmBG")},null,null);r.default=i.exports},zmBG:function(t,r){}});