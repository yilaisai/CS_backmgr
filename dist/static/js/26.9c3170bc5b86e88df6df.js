webpackJsonp([26],{"9fiY":function(t,e){},SHJx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4YfN"),l=a.n(i),s=a("48sp"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"设置持币等级",visible:t.dialogVisible,width:"400px",center:""},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.getItem,close:t.resetForm}},[a("el-form",{ref:"form",attrs:{"label-width":"80px",rules:t.rules,size:"mini",model:t.form}},[a("el-form-item",{attrs:{label:"持币量",prop:"holdAmount"}},[a("el-input",{model:{value:t.form.holdAmount,callback:function(e){t.$set(t.form,"holdAmount",e)},expression:"form.holdAmount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接单下限",prop:"amount"}},[a("el-input",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1)],1),t._v(" "),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])],1)],1)},staticRenderFns:[]};var n=a("C7Lr")({props:["visible","type","formItem"],data:function(){return{form:{holdAmount:"",amount:""},rules:{holdAmount:[{required:!0,message:"请输入持币量",trigger:"blur"}],amount:[{required:!0,message:"请输入接单下限",trigger:"blur"}]}}},mounted:function(){},activated:function(){},computed:{dialogVisible:{set:function(t){this.$emit("setVisible",t)},get:function(){return this.visible}}},methods:{getItem:function(){this.form.holdAmount=this.formItem.holdAmount,this.form.amount=this.formItem.amount},resetForm:function(){this.form.holdAmount="",this.form.amount=""},confirm:function(){var t=this;this.$refs.form.validate(function(e){e&&(1==t.type?t.$emit("submitAdd",t.form):2==t.type&&t.$emit("submitEdit",t.form))})}}},o,!1,function(t){a("Xd32")},"data-v-561d03d4",null).exports,r={data:function(){return{filterForm:{coinName:"USDT"},detaileData:{otcFee:""},quota:{assetCertification:"",payType:""},OtcPayList:[],currentItem:{payType:1,buyRate:"",saleRate:"",rank:1},rateDetaile:[],atobLimitNum:0,atobLimitMin:0,atobLimitMax:0,levelList:[],visible:!1,type:1,item:{holdAmount:"",amount:""}}},activated:function(){this.queryOtcCoinConfig(),this.getDefaultRate(),this.getList()},methods:{getList:function(){var t=this;this.$http.post("/wallet/app/otc/backmgr/getMerchantHoldList").then(function(e){200==e.code&&(t.levelList=e.result)})},addItem:function(){this.item.holdAmount="",this.item.amount="",this.visible=!0,this.type=1},editItem:function(t){this.type=2,this.visible=!0,this.item=t},confirmAdd:function(t){var e=this;this.$http.post("/wallet/app/otc/backmgr/addMerchantHold",{amount:t.amount,holdAmount:t.holdAmount}).then(function(t){e.$message({type:"success",message:"添加成功"}),e.visible=!1,e.getList()})},confirmEdit:function(t){var e=this;this.$http.post("/wallet/app/otc/backmgr/updateMerchantHold",{amount:t.amount,holdAmount:t.holdAmount,id:this.item.id}).then(function(t){e.$message({type:"success",message:"修改成功"}),e.visible=!1,e.getList()})},deleteItem:function(t){var e=this;this.$confirm("确认删除？").then(function(a){e.$http.post("/wallet/app/otc/backmgr/delMerchantHold",{id:t.id}).then(function(t){200==t.code&&(e.$message({type:"success",message:t.msg}),e.getList())})})},updateDefaultRate:function(){var t=this,e={buyRate:Math.floor(100*this.currentItem.buyRate)/1e4,saleRate:Math.floor(100*this.currentItem.saleRate)/1e4,totalBuyRate:Math.floor(100*this.rateDetaile[0].totalBuyRate)/1e4,totalSaleRate:Math.floor(100*this.rateDetaile[0].totalSaleRate)/1e4,payType:this.currentItem.payType,rank:1};this.$http.post("/wallet/invite/backmgr/updateDefaultRate",e).then(function(e){200==e.code&&(t.$message({type:"success",message:e.msg}),t.getDefaultRate())})},getDefaultRate:function(){var t=this;this.$http.post("/wallet/invite/backmgr/getDefaultRate",{payType:this.currentItem.payType,rank:this.currentItem.rank}).then(function(e){if(200==e.code){if(e.result.forEach(function(t){t.totalBuyRate=Math.floor(1e4*t.totalBuyRate)/100,t.totalSaleRate=Math.floor(1e4*t.totalSaleRate)/100,t.saleRate=Math.floor(1e4*t.saleRate)/100,t.buyRate=Math.floor(1e4*t.buyRate)/100}),e.result.length>1){var a=!0,i=!0,l=e.result[0].saleRate,s=e.result[0].buyRate;t.currentItem.saleRate="",t.currentItem.buyRate="",e.result.forEach(function(t){a=!(!a||l!=t.saleRate),i=!(!i||s!=t.buyRate)}),a&&(t.currentItem.saleRate=l),i&&(t.currentItem.buyRate=s)}else t.currentItem.saleRate=e.result[0].saleRate,t.currentItem.buyRate=e.result[0].buyRate;t.rateDetaile=e.result}})},queryOtcCoinConfig:function(){var t=this;this.$http.post("/wallet/app/otc/backmgr/queryOtcCoinConfig",{coinName:this.filterForm.coinName}).then(function(e){200==e.code&&(t.detaileData=e.result.coinInfo,t.atobLimitNum=e.result.atobLimitNum,t.atobLimitMin=e.result.atobLimitMin,t.atobLimitMax=e.result.atobLimitMax,t.OtcPayList=[],e.result.OtcPayList.forEach(function(e,a){t.OtcPayList.push({description:e.description,value:1*e.payType,assetCertification:e.assetCertification})}),""==t.quota.payType&&(t.quota.payType=t.OtcPayList[0].value,t.quota.assetCertification=t.OtcPayList[0].assetCertification))})},assetCertificationChange:function(t){this.quota.assetCertification=this.OtcPayList[t-1].assetCertification},UpdateOtcCoinConfig:function(){var t=this;this.$http.post("/wallet/app/otc/backmgr/UpdateOtcCoinConfig",{coinId:this.detaileData.coinId,deposit:this.detaileData.deposit,otcFee:this.detaileData.otcFee,sysMatchMin:this.detaileData.sysMatchMin,sysMatchMax:this.detaileData.sysMatchMax,sysCashoutMin:this.detaileData.sysCashoutMin,sysCashoutMax:this.detaileData.sysCashoutMax,assetCertification:this.quota.assetCertification,payType:this.quota.payType,atobLimitNum:this.atobLimitNum,atobLimitMin:this.atobLimitMin,atobLimitMax:this.atobLimitMax}).then(function(e){200==e.code?(t.$notify({title:"成功",message:"修改成功",type:"success"}),t.queryOtcCoinConfig()):t.$notify.error({title:"提示",message:e.msg})})}},watch:{},computed:l()({},Object(s.b)(["coinInfo"])),components:{AddLeVEL:n}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"LegalCurrencySetting-page"},[a("div",{staticClass:"title"},[a("h2",[t._v("法币设置")]),t._v(" "),a("div",{staticClass:"select-wrap"},[a("label",[t._v("币种：")]),t._v(" "),a("el-select",{attrs:{size:"small"},on:{change:t.queryOtcCoinConfig},model:{value:t.filterForm.coinName,callback:function(e){t.$set(t.filterForm,"coinName",e)},expression:"filterForm.coinName"}},t._l(t.coinInfo,function(t,e){return a("el-option",{key:e,attrs:{value:t.coinName,label:t.coinName}})}),1)],1)]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("h4",[t._v("普通交易设置")]),t._v(" "),a("el-form",{ref:"filterForm",attrs:{"label-width":"60px",size:"mini"}},[a("el-form-item",{attrs:{label:"手续费:"}},[a("el-input",{attrs:{placeholder:"请输入手续费"},model:{value:t.detaileData.otcFee,callback:function(e){t.$set(t.detaileData,"otcFee",e)},expression:"detaileData.otcFee"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"保证金:"}},[a("el-input",{attrs:{placeholder:"请输入保证金"},model:{value:t.detaileData.deposit,callback:function(e){t.$set(t.detaileData,"deposit",e)},expression:"detaileData.deposit"}})],1)],1),t._v(" "),a("h4",[t._v("交易员接单额度全局设置")]),t._v(" "),a("el-form",{ref:"filterForm",attrs:{"label-width":"140px",size:"mini"}},[a("el-form-item",{attrs:{label:"全局派单兑出范围:"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.detaileData.sysCashoutMin,callback:function(e){t.$set(t.detaileData,"sysCashoutMin",e)},expression:"detaileData.sysCashoutMin"}},[a("template",{slot:"append"},[t._v(t._s(t.filterForm.coinName))])],2),t._v(" "),a("span",[t._v("　~　")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.detaileData.sysCashoutMax,callback:function(e){t.$set(t.detaileData,"sysCashoutMax",e)},expression:"detaileData.sysCashoutMax"}},[a("template",{slot:"append"},[t._v(t._s(t.filterForm.coinName))])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.UpdateOtcCoinConfig}},[t._v("保存修改")])],1)],1)],1),t._v(" "),a("h3",[t._v("持币等级")]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-form",{ref:"filterForm",attrs:{"label-width":"60px",size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addItem}},[t._v("新增等级")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.levelList,center:""}},[a("el-table-column",{attrs:{prop:"id",label:"持币等级",width:"120px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"holdAmount",label:"持币量（U）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"接单下限（U）"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.editItem(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.deleteItem(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("p",{staticClass:"tips"},[t._v("1.用户持币量大于持币等级持币量，不接低于接单下限的订单"),a("br"),t._v("2.若订单匹配时没有符合条件的交易员，则二次筛选交易员时，此规则无效")])],1)],1),t._v(" "),a("h3",[t._v("返佣设置")]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[t.rateDetaile.length>0?a("el-form",{ref:"filterForm",attrs:{"label-width":"160px",size:"mini"}},[a("el-form-item",{attrs:{label:"全局最大兑出返佣比例:"}},[a("el-input",{attrs:{placeholder:"未设置默认0.7%"},model:{value:t.rateDetaile[0].totalBuyRate,callback:function(e){t.$set(t.rateDetaile[0],"totalBuyRate",e)},expression:"rateDetaile[0].totalBuyRate"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("span",[t._v("设置后返佣比例之和不可超过该值")])],1),t._v(" "),a("el-form-item",{attrs:{label:"全局最大兑入返佣比例:"}},[a("el-input",{attrs:{placeholder:"未设置默认0.2%"},model:{value:t.rateDetaile[0].totalSaleRate,callback:function(e){t.$set(t.rateDetaile[0],"totalSaleRate",e)},expression:"rateDetaile[0].totalSaleRate"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("span",[t._v("设置后返佣比例之和不可超过该值")])],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"支付通道:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getDefaultRate},model:{value:t.currentItem.payType,callback:function(e){t.$set(t.currentItem,"payType",e)},expression:"currentItem.payType"}},[a("el-option",{attrs:{label:"全部",value:0}}),t._v(" "),a("el-option",{attrs:{label:"银行卡",value:1}}),t._v(" "),a("el-option",{attrs:{label:"支付宝",value:2}}),t._v(" "),a("el-option",{attrs:{label:"微信",value:3}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"默认返佣兑入返佣比例:"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.currentItem.saleRate,callback:function(e){t.$set(t.currentItem,"saleRate",e)},expression:"currentItem.saleRate"}},[a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"默认返佣兑出返佣比例:"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.currentItem.buyRate,callback:function(e){t.$set(t.currentItem,"buyRate",e)},expression:"currentItem.buyRate"}},[a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),0==t.currentItem.payType?a("el-form-item",{staticClass:"showList",attrs:{label:""}},[t.rateDetaile.length>1?a("div",{staticClass:"item"},[a("span",[t._v("银行卡兑入返佣比例："),a("b",[t._v(t._s(t.rateDetaile[0].saleRate)+"%")])]),t._v(" "),a("span",[t._v("银行卡兑出返佣比例："),a("b",[t._v(t._s(t.rateDetaile[0].buyRate)+"%")])])]):t._e(),t._v(" "),t.rateDetaile.length>1?a("div",{staticClass:"item"},[a("span",[t._v("支付宝兑入返佣比例："),a("b",[t._v(t._s(t.rateDetaile[1].saleRate)+"%")])]),t._v(" "),a("span",[t._v("支付宝兑出返佣比例："),a("b",[t._v(t._s(t.rateDetaile[1].buyRate)+"%")])])]):t._e(),t._v(" "),t.rateDetaile.length>1?a("div",{staticClass:"item"},[a("span",[t._v("微信兑入返佣比例："),a("b",[t._v(t._s(t.rateDetaile[2].saleRate)+"%")])]),t._v(" "),a("span",[t._v("微信兑出返佣比例："),a("b",[t._v(t._s(t.rateDetaile[2].buyRate)+"%")])])]):t._e()]):t._e(),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.updateDefaultRate}},[t._v("保存")])],1)],1):t._e()],1),t._v(" "),a("AddLeVEL",{attrs:{visible:t.visible,formItem:t.item,type:t.type},on:{setVisible:function(e){t.visible=!1},submitAdd:t.confirmAdd,submitEdit:t.confirmEdit}})],1)},staticRenderFns:[]};var c=a("C7Lr")(r,u,!1,function(t){a("9fiY")},"data-v-83d69fce",null);e.default=c.exports},Xd32:function(t,e){}});