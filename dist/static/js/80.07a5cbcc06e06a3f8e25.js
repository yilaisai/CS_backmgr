webpackJsonp([80],{M0PH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("lvKI");var l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"node-manage"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("p",{staticStyle:{margin:"0 0 0 30px","font-weight":"bold"}},[e._v("本期PNB总投票数："+e._s(e.pNBAmount))])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"center","margin-bottom":"30px"},attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.createNode}},[e._v("节点申请")])],1)],1),e._v(" "),a("el-form",{ref:"filterForm",attrs:{inline:!0,"label-width":"100px",model:e.filterForm}},[a("sac-input",{ref:"phone",attrs:{label:"Sacbox账号",prop:"phone"},model:{value:e.filterForm.sacBoxAccount,callback:function(t){e.$set(e.filterForm,"sacBoxAccount","string"==typeof t?t.trim():t)},expression:"filterForm.sacBoxAccount"}}),e._v(" "),a("sac-input",{ref:"nickName",attrs:{label:"节点名",prop:"nickName"},model:{value:e.filterForm.teamName,callback:function(t){e.$set(e.filterForm,"teamName","string"==typeof t?t.trim():t)},expression:"filterForm.teamName"}}),e._v(" "),a("sac-select",{attrs:{label:"状态","data-list":e.stateList},model:{value:e.filterForm.status,callback:function(t){e.$set(e.filterForm,"status",t)},expression:"filterForm.status"}}),e._v(" "),a("sac-submit-form",{attrs:{isReset:!1},on:{submitForm:function(t){return e.submitForm(1)}}})],1),e._v(" "),a("sac-table",{attrs:{data:e.listData.list}},[a("el-table-column",{attrs:{prop:"teamName",label:"节点名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sacBoxAccount",label:"Sacbox账号",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sacBoxAddr",label:"SAC收款地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sacAmount",label:"SAC持仓数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pnbAmount",label:"PNB投票数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeIntroduce",label:"节点简介"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("2"==t.row.status?"审核中":"1"==t.row.status?"审核成功":"审核失败")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.lockStatus?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.optStatusChange(0,"解锁节点",t.row)}}},[e._v("解锁节点\n        ")]):e._e(),e._v(" "),0==t.row.lockStatus?a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){return e.optStatusChange(1,"锁定节点",t.row)}}},[e._v("锁定节点\n        ")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){return e.goDetail(t.row)}}},[e._v("查看详情")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){return e.goModifyDetail(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.sendEmail()}}},[e._v("发邮件")])]}}])})],1),e._v(" "),a("sac-pagination",{directives:[{name:"show",rawName:"v-show",value:e.listData.list.length>0,expression:"listData.list.length>0"}],attrs:{total:+e.listData.total,"page-size":e.filterForm.pageSize,"current-page":e.filterForm.curPage},on:{handleChange:e.getPaginationChange}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.dialogVisibleTitle,visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"details",attrs:{model:e.details,inline:!0,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"logo:"}},[e.details.logoUrl?a("img",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"avatar",attrs:{src:e.details.logoUrl,alt:""}}):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("span",[e._v(e._s("2"==e.details.status?"审核中":"1"==e.details.status?"审核成功":"审核失败"))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点名称:"}},[a("span",[e._v(e._s(e.details.teamName))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点简介:"}},[a("span",[e._v(e._s(e.details.nodeIntroduce))])]),e._v(" "),a("el-form-item",{attrs:{label:"Sacbox账号:"}},[a("span",[e._v(e._s(e.details.sacBoxAccount))])]),e._v(" "),a("el-form-item",{attrs:{label:"SAC收款地址:"}},[a("span",[e._v(e._s(e.details.sacBoxAddr))])]),e._v(" "),a("el-form-item",{attrs:{label:"SAC持仓数:"}},[a("span",[e._v(e._s(e.details.sacAmount))])]),e._v(" "),a("el-form-item",{attrs:{label:"PNB投票数:"}},[a("span",[e._v(e._s(e.details.pnbAmount))])]),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:"}},[a("span",[e._v(e._s(e.details.email))])]),e._v(" "),a("el-form-item",{attrs:{label:"官网地址:"}},[a("span",[e._v(e._s(e.details.officialAddr))])]),e._v(" "),a("el-form-item",{attrs:{label:"团队介绍:"}},[a("span",[e._v(e._s(e.details.teamIntroduce))]),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.isTeamDoc,expression:"isTeamDoc"}],staticClass:"el-upload-list__item-name",attrs:{target:"_blank",href:e.details.teamIntroduceUrl}},[a("i",{staticClass:"el-icon-document"}),e._v(e._s(e.teamIntroduceUrl)+"\n        ")]),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isTeamImg,expression:"isTeamImg"},{name:"viewer",rawName:"v-viewer"}],staticClass:"introduce",attrs:{src:e.details.teamIntroduceUrl}})]),e._v(" "),a("el-form-item",{attrs:{label:"运营及宣传方案:"}},[a("span",[e._v(e._s(e.details.marketingIntroduce))]),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.isMarketDoc,expression:"isMarketDoc"}],staticClass:"el-upload-list__item-name",attrs:{target:"_blank",href:e.details.marketingIntroduceUrl}},[a("i",{staticClass:"el-icon-document"}),e._v(e._s(e.marketingIntroduceUrl)+"\n        ")]),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isMarketImg,expression:"isMarketImg"},{name:"viewer",rawName:"v-viewer"}],staticClass:"introduce",attrs:{src:e.details.marketingIntroduceUrl}})])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.isApproved(0,e.details.teamId)}}},[e._v("不通过审核")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.isApproved(1,e.details.teamId)}}},[e._v("通过审核并分配账号")])],1),e._v(" "),a("el-dialog",{attrs:{width:"40%",title:e.innerVisibleTitle,"append-to-body":"",visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-input",{attrs:{size:"small",type:"textarea",rows:3,width:"100%",placeholder:"请输入原因"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.innerVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.approved("不通过审核原因"==e.innerVisibleTitle?0:1)}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("C7Lr")({name:"node-manage",data:function(){return{stateList:[{value:"",label:"全部"},{value:"2",label:"审核中"},{value:"0",label:"审核失败"},{value:"1",label:"审核成功"}],filterForm:{sacBoxAccount:"",teamName:"",status:"",curPage:1,pageSize:20},listData:{total:null,list:[]},pNBAmount:"",dialogVisibleTitle:"",dialogVisible:!1,details:{},isTeamImg:!1,isTeamDoc:!1,isMarketImg:!1,isMarketDoc:!1,teamIntroduceUrl:"",marketingIntroduceUrl:"",innerVisible:!1,innerVisibleTitle:"",info:"",fromName:""}},methods:{submitForm:function(e){this.filterForm.curPage=e,this.getList()},getList:function(){var e=this;this.$http.post("supernode/backmgr/team/detail/list",this.filterForm).then(function(t){var a=t.result.list,l=a.list,r=a.total;e.listData.list=l,e.listData.total=r,e.pNBAmount=t.result.pNBAmount,e.fromName="【"+t.result.fromName+"】 "+t.result.from})},getPaginationChange:function(e,t){this.filterForm.pageSize=e,this.filterForm.curPage=t,this.submitForm(t)},createNode:function(){this.$router.push({name:"nodeModify"})},goModifyDetail:function(e){this.$router.push({name:"nodeModify",params:e})},goDetail:function(e){this.dialogVisibleTitle="查看"+e.teamName+"节点详情",this.dialogVisible=!0,this.details=e,this.teamIntroduceUrl=e.teamIntroduceUrl?e.teamIntroduceUrl.split("supersac_doc/")[1]:"",this.marketingIntroduceUrl=e.marketingIntroduceUrl?e.marketingIntroduceUrl.split("supersac_doc/")[1]:"",this.teamIntroduceUrl?this.teamIntroduceUrl.indexOf(".jpg")>-1||this.teamIntroduceUrl.indexOf(".jpeg")>-1||this.teamIntroduceUrl.indexOf(".png")>-1?(this.isTeamImg=!0,this.isTeamDoc=!1):(this.isTeamImg=!1,this.isTeamDoc=!0):(this.isTeamImg=!1,this.isTeamDoc=!1),this.marketingIntroduceUrl?this.marketingIntroduceUrl.indexOf(".jpg")>-1||this.marketingIntroduceUrl.indexOf(".jpeg")>-1||this.marketingIntroduceUrl.indexOf(".png")>-1?(this.isMarketImg=!0,this.isMarketDoc=!1):(this.isMarketImg=!1,this.isMarketDoc=!0):(this.isMarketImg=!1,this.isMarketDoc=!1)},optStatusChange:function(e,t,a){var l=this,r=this.$createElement;this.$msgbox({title:"提示",message:r("p",null,[r("span",null,"确定执行 "),r("span",{style:"color: red"},t+" "),r("span",{style:"color: #0a52e0"},""+a.teamName),r("span",null," 吗?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(r,s,n){"confirm"===r?l.$http.post("supernode/backmgr/team/detail/lock",{teamId:a.teamId,status:e}).then(function(e){l.$notify({title:"成功",message:t+" "+a.teamName+" 成功",type:"success"}),l.getList(),n()}):n()}})},isApproved:function(e,t){this.innerVisible=!0,this.innerVisibleTitle=e?"通过审核原因":"不通过审核原因"},approved:function(e){var t=this;this.$http.post("supernode/backmgr/team/detail/audit",{status:e,teamId:this.details.teamId,info:this.info}).then(function(a){t.$notify({title:"成功",message:(e?"通过审核并分配账号给节点"+t.details.teamName:"节点"+t.details.teamName+"不通过审核")+"  处理成功",type:"success"}),t.innerVisible=!1,t.dialogVisible=!1,t.getList()})},sendEmail:function(){this.$router.push({name:"sendEmail",params:{fromName:this.fromName}})}},activated:function(){this.getList()}},l,!1,function(e){a("q5SN")},null,null);t.default=r.exports},q5SN:function(e,t){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: Cannot find module 'tslib'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:594:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:520:25)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\dist\\less.cjs.js:3:13)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:551:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:543:3)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\index.js:1:80)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:195:19)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:367:11\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:172:11\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:32:11)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:365:2)\n    at NormalModule.doBuild (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:182:3)\n    at NormalModule.build (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:275:15)")}});