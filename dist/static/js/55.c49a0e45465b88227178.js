webpackJsonp([55],{lTxc:function(t,e){},oeKM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{filterForm:{appId:"",ip:"",pageNum:1,pageSize:20},formData:{appId:"",name:"",ip:"",type:""},typeList:[{value:0,desc:"收银台商户"},{value:1,desc:"普通API商户"},{value:2,desc:"钱包API商户"}],list:[],total:0,showDialog:!1}},activated:function(){this.getList()},methods:{addItem:function(){this.formData={appId:"",appUserId:"",foreverOrLimited:"2",ip:"",type:""},this.showDialog=!0},handleCurrentChange:function(t){this.filterForm.pageNum=t,this.getList()},handleSizeChange:function(t){this.filterForm.pageSize=t,this.getList()},getList:function(){var t=this;this.list=[],this.$http.post("/wallet/backmgr/ipWhite/list",this.filterForm).then(function(e){200==e.code&&(t.list=e.result.page.list,t.total=e.result.page.total)})},addCheckoutWhitelist:function(){var t=this;""!=this.formData.appId.trim()?""!=this.formData.appUserId.trim()||""!=this.formData.ip.trim()?""!==this.formData.type?this.$http.post("/wallet/backmgr/ipWhite/add",this.formData).then(function(e){200==e.code?(t.$message({type:"success",message:"添加成功"}),t.filterForm.pageNum=1,t.getList(),t.showDialog=!1):t.$message({type:"info",message:e.msg})}):this.$message({type:"info",message:"请选择类型"}):this.$message({type:"info",message:"请填写userid/ip"}):this.$message({type:"info",message:"请输入appId"})},deleteItem:function(t){var e=this;this.$confirm("删除后该IP将不可访问收银台?","确认删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("/wallet/backmgr/ipWhite/delete",{appId:t.app_id,ip:t.ip,type:t.type}).then(function(t){200==t.code?(e.$message({type:"success",message:"解封成功"}),e.getList()):e.$message({type:"info",message:t.msg})})})},search:function(){this.filterForm.pageNum=1,this.getList()}},watch:{},computed:{}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"whitelist-page"},[a("el-form",{ref:"filterForm",attrs:{inline:!0,model:t.filterForm,"label-width":"86px",size:"mini"}},[a("el-form-item",{attrs:{label:"appid:"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入appid"},model:{value:t.filterForm.appId,callback:function(e){t.$set(t.filterForm,"appId",e)},expression:"filterForm.appId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"ip:"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"ip"},model:{value:t.filterForm.ip,callback:function(e){t.$set(t.filterForm,"ip",e)},expression:"filterForm.ip"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(e){return t.search(e)}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(e){return t.addItem(e)}}},[t._v("新增")])],1)],1),t._v(" "),a("el-table",{attrs:{stripe:"",border:"",height:"100%",size:"mini",data:t.list}},[a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.$fmtDate(e.row.create_time,"full")))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"app_id",label:"appid",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商户编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商户类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[t._v("\n\t\t\t\t"+t._s(0==e.row.type?"收银台商户":1==e.row.type?"普通API商户":"钱包API商户")+"\n\t\t\t")])}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteItem(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.filterForm.pageNum,"page-size":t.filterForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:1*t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"增加白名单",visible:t.showDialog,width:"700px"},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"form",attrs:{inline:!0,model:t.formData,"label-width":"86px",size:"mini"}},[a("el-form-item",{attrs:{label:"appId:"}},[a("el-input",{attrs:{placeholder:"请输入appId"},on:{input:function(e){t.formData.appId=t.formData.appId.replace(/[^\d]/g,"")}},model:{value:t.formData.appId,callback:function(e){t.$set(t.formData,"appId",e)},expression:"formData.appId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商户编号:"}},[a("el-input",{attrs:{placeholder:"请输入商户编号"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"ip:"}},[a("el-input",{attrs:{placeholder:"请输入ip"},model:{value:t.formData.ip,callback:function(e){t.$set(t.formData,"ip",e)},expression:"formData.ip"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商户类型:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.typeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.desc,value:t.value}})}),1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:t.addCheckoutWhitelist}},[t._v("确定增加")])],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(i,l,!1,function(t){a("lTxc")},"data-v-50f15456",null);e.default=s.exports}});