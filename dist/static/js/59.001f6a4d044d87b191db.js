webpackJsonp([59],{jk1w:function(e,a){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: Cannot find module 'tslib'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:594:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:520:25)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\dist\\less.cjs.js:3:13)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:551:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:543:3)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\index.js:1:80)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:195:19)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:367:11\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:172:11\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:32:11)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:365:2)\n    at NormalModule.doBuild (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:182:3)\n    at NormalModule.build (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:275:15)")},zc4h:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("3cXf"),n=t.n(r),l={name:"currency-set",data:function(){var e=function(e,a,t){/^[0-9]+.?[0-9]*$/.test(a)?t():t(new Error(e.message))};return{coinValue:"",ruleForm:{coinType:"",kingRewardRate:"",goldSilverRate:"",bronzeRewardRate:"",eachOneRate:""},sacTeamRewardList:[],tapIndex:"",teamName:"",teamId:"",server_path:"",pageTypeList:[],rules:{bronzeRewardRate:[{required:!0,message:"请输入数额",trigger:"blur"},{validator:e,message:"必须为数字"}],goldSilverRate:[{required:!0,message:"请输入数额",trigger:"blur"},{validator:e,message:"必须为数字"}],kingRewardRate:[{required:!0,message:"请输入数额",trigger:"blur"},{validator:e,message:"必须为数字"}],eachOneRate:[{required:!0,message:"请输入数额",trigger:"blur"},{validator:e,message:"必须为数字"}]}}},methods:{onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(a){if(!a)return!1;if(Number(e.ruleForm.kingRewardRate)+Number(e.ruleForm.goldSilverRate)+Number(e.ruleForm.bronzeRewardRate)+Number(e.ruleForm.eachOneRate)==100){JSON.parse(n()(e.ruleForm));e.$http.post("/supernode/backmgr/team/teamRewardSeting",{teamId:e.teamId,kingRewardRate:(e.ruleForm.kingRewardRate/100).toFixed(2),goldRewardRate:(e.ruleForm.goldSilverRate/100).toFixed(2),bronzeRewardRate:(e.ruleForm.bronzeRewardRate/100).toFixed(2),eachOneRate:(e.ruleForm.eachOneRate/100).toFixed(2)}).then(function(a){e.$message({type:"success",message:"修改成功！"}),e.$router.go(-1)})}else e.$notify({message:"各奖励百分比相加必须等于100%！",type:"error"})})},addPrize:function(e,a){var t=this;e.coinId&&""!=e.coinId?""!=(e.amount+"").trim()?this.$http.post("/supernode/backmgr/team/teamCoinSeting",{teamId:this.teamId,coinId:e.coinId,id:e.id,amount:e.amount}).then(function(e){200==e.code&&(t.sacTeamRewardList[t.sacTeamRewardList.length-1].type=0,t.getTeamRewardSeting(t.teamId).then(function(){t.sacTeamRewardList.push({coinName:"",amount:"",type:1})}))}):this.$notify({message:"请输入币种的数量",type:"error"}):this.$notify({message:"请选择币种类型",type:"error"})},deletePrize:function(e,a){var t=this,r=e.coinName;"number"!=typeof r&&(r=e.coinId),this.$http.post("/supernode/backmgr/team/delTeamCoinSeting",{teamId:this.teamId,coinId:r}).then(function(e){t.getTeamRewardSeting(t.teamId)})},filter:function(e){return void 0==e?"":100*e},getTeamRewardSeting:function(e){var a=this;return this.$http.post("/supernode/backmgr/team/getTeamRewardSeting",{teamId:e}).then(function(e){var t=e.result||{};a.ruleForm={eachOneRate:a.filter(t.eachOneRate),goldSilverRate:a.filter(t.goldSilverRate),kingRewardRate:a.filter(t.kingRewardRate),bronzeRewardRate:a.filter(t.bronzeRewardRate),sacTeamRewardCoinResultDtoList:t.sacTeamRewardCoinResultDtoList,teamId:t.teamId,id:t.id},(e.result||{}).sacTeamRewardCoinResultDtoList&&0!=(e.result||{}).sacTeamRewardCoinResultDtoList.length?(a.sacTeamRewardList=(e.result||{}).sacTeamRewardCoinResultDtoList,a.tapIndex=(e.result||{}).sacTeamRewardCoinResultDtoList.length):(a.sacTeamRewardList=[{coinName:"",amount:"",type:1}],a.tapIndex=""),a.ruleForm.coinType=(a.sacTeamRewardList[0]||{}).coinName})},getCoinInfoList:function(){var e=this;this.$http.post("/supernode/coin/open/getCoinInfoList",{}).then(function(a){e.pageTypeList=a.result})}},activated:function(){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.getCoinInfoList(),this.server_path=SERVER_PATH,this.$route.query&&(this.teamName=this.$route.query.teamName,this.teamId=this.$route.query.teamId,this.getTeamRewardSeting(this.teamId))}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"set-prize"},[t("el-row",{staticStyle:{"margin-bottom":"20px"}},[t("el-col",{attrs:{span:8}},[t("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(a){return e.$router.go(-1)}}},[e._v("返回")])],1),e._v(" "),t("h2",[e._v(e._s(e.teamName)+"奖励设置")])],1),e._v(" "),t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"230px"}},[e._l(e.sacTeamRewardList,function(a,r){return t("el-form-item",{key:r,attrs:{label:e.teamName+"总奖励:",required:""}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"coinType"}},[t("el-select",{ref:"coinType",refInFor:!0,model:{value:a.coinId,callback:function(t){e.$set(a,"coinId",t)},expression:"teamReward.coinId"}},e._l(e.pageTypeList,function(e,a){return t("el-option",{key:a,attrs:{label:e.coinName,value:e.coinId}})}),1)],1)],1),e._v(" "),t("el-col",{staticClass:"line",attrs:{span:1}}),e._v(" "),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{prop:"coinNumber"}},[t("el-input",{staticClass:"min-input",attrs:{clearable:"",size:"small",placeholder:"请输入数量"},model:{value:a.amount,callback:function(t){e.$set(a,"amount",t)},expression:"teamReward.amount"}})],1)],1),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!a.type,expression:"!teamReward.type"}],staticStyle:{width:"100px"},attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deletePrize(a,r)}}},[e._v("删除")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:r==e.sacTeamRewardList.length-1,expression:"index == sacTeamRewardList.length - 1"}],staticStyle:{width:"100px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addPrize(a,r)}}},[e._v("添加")])],1)}),e._v(" "),t("el-form-item",{attrs:{label:"王者奖励百分比:",prop:"kingRewardRate"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{clearable:"",size:"small",placeholder:"请输入百分比"},model:{value:e.ruleForm.kingRewardRate,callback:function(a){e.$set(e.ruleForm,"kingRewardRate",a)},expression:"ruleForm.kingRewardRate"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),t("el-form-item",{attrs:{label:"钻石+铂金奖励百分比:",prop:"goldSilverRate",required:""}},[t("el-input",{staticStyle:{width:"80%"},attrs:{size:"small",placeholder:"请输入百分比",clearable:""},model:{value:e.ruleForm.goldSilverRate,callback:function(a){e.$set(e.ruleForm,"goldSilverRate",a)},expression:"ruleForm.goldSilverRate"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),t("el-form-item",{attrs:{label:"黄金奖励百分比:",prop:"bronzeRewardRate"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{clearable:"",size:"small",placeholder:"请输入百分比"},model:{value:e.ruleForm.bronzeRewardRate,callback:function(a){e.$set(e.ruleForm,"bronzeRewardRate",a)},expression:"ruleForm.bronzeRewardRate"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),t("el-form-item",{attrs:{label:"总人数奖励百分比:",prop:"eachOneRate"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{clearable:"",size:"small",placeholder:"请输入百分比"},model:{value:e.ruleForm.eachOneRate,callback:function(a){e.$set(e.ruleForm,"eachOneRate",a)},expression:"ruleForm.eachOneRate"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),t("p",{staticClass:"total-prize"},[e._v("*各奖励百分比相加等于100%")]),e._v(" "),t("el-form-item",{staticStyle:{"text-align":"center",width:"80%","margin-top":"60px"},attrs:{size:"small"}},[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),t("el-button",{staticStyle:{width:"100px"},attrs:{type:"danger"},on:{click:function(a){return e.$router.go(-1)}}},[e._v("取消")])],1)],2)],1)},staticRenderFns:[]};var s=t("C7Lr")(l,o,!1,function(e){t("jk1w")},null,null);a.default=s.exports}});