webpackJsonp([58],{"0Uql":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("bOdI"),l=t.n(i)()({data:function(){return{radio:"1",coinName:this.$variableCoin,pageData:{coinInfo:{},info:{},payList:[],feeList:[]},formData:{value1:"",value2:""},dialogVisible:!1,dialogType:"",label1:"",label2:"",dialogTitle:"修改",payType:1}},activated:function(){this.getDetails()},methods:{getDetails:function(){var a=this;this.$http.post("/wallet/backmgr/merchant/detail",{userId:this.$route.query.id}).then(function(e){a.pageData=e.result})},updateMerchantExchangeType:function(a){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantExchangeType",a).then(function(a){e.$notify.success({title:"提示",message:a.msg})})},inTypeChange:function(a){this.updateMerchantExchangeType({exchangeType:a,type:1,userId:this.$route.query.id})},outTypeChange:function(a){this.updateMerchantExchangeType({exchangeType:a,type:2,userId:this.$route.query.id})},deleteGoogleVerify:function(){var a=this;this.$prompt("删除后，用户需重置谷歌验证，确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入您的谷歌验证码"}).then(function(e){var t=e.value;a.$http.post("/wallet/backmgr/merchant/deleteGoogleVerify",{userId:a.$route.query.id,secret:t}).then(function(e){a.$notify.success({title:"提示",message:e.msg})})}).catch(function(){})},handleClose:function(){},showDialog:function(a){this.dialogType=a||"","duiRu"==this.dialogType?(this.dialogTitle="修改兑入费率",this.label1="最小兑入额度：",this.label2="最大兑入额度：",this.formData.value1=this.pageData.coinInfo.minIn,this.formData.value2=this.pageData.coinInfo.maxIn):"duiChu"==this.dialogType?(this.dialogTitle="修改兑出费率",this.label1="最小兑出额度：",this.label2="最大兑出额度：",this.formData.value1=this.pageData.coinInfo.minOut,this.formData.value2=this.pageData.coinInfo.maxOut):"feeRateIn"==this.dialogType?(this.dialogTitle="修改商户手续费【"+this.payTypeName+"】",this.label1="商户兑入手续费:",this.label2="商户兑出手续费:",this.formData.value1=this.inFee,this.formData.value2=this.outFee):"firstRate"==this.dialogType?(this.dialogTitle="修改直推人费率",this.label1="兑入佣金费率：",this.label2="兑出佣金费率：",this.formData.value1=this.pageData.info.firstRateIn,this.formData.value2=this.pageData.info.firstRateOut):"secRate"==this.dialogType?(this.dialogTitle="修改间推人费率",this.label1="兑入佣金费率：",this.label2="兑出佣金费率：",this.formData.value1=this.pageData.info.secRateIn,this.formData.value2=this.pageData.info.secRateOut):"daifu"==this.dialogType&&(this.dialogTitle="修改代付兑出手续费比例",this.label1="每单代付费率",this.label2="每单固定金额",this.formData.value1=Math.floor(1e4*this.pageData.info.batchOutRatioFee)/100,this.formData.value2=this.pageData.info.batchOutFixedFee),this.dialogVisible=!0},updateMerchantCoinConfig:function(a){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantCoinConfig",{coinName:this.coinName,type:a,userId:this.$route.query.id,value1:this.formData.value1,value2:this.formData.value2}).then(function(a){e.formData.value1="",e.formData.value2="",e.$notify.success({title:"提示",message:a.msg}),e.getDetails()})},updateMerchantInfo:function(a){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantInfo",{coinName:this.coinName,type:a,userId:this.$route.query.id,value1:this.formData.value1,value2:this.formData.value2}).then(function(a){e.formData.value1="",e.formData.value2="",e.$notify.success({title:"提示",message:a.msg}),e.getDetails()})},updateMerchantFee:function(a){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantFee",{coinName:this.coinName,payType:this.payType,type:a,userId:this.$route.query.id,value1:(this.formData.value1/100).toFixed(4),value2:(this.formData.value2/100).toFixed(4)}).then(function(a){e.formData.value1="",e.formData.value2="",e.$notify.success({title:"提示",message:a.msg}),e.getDetails()})},dialogEnter:function(){this.dialogVisible=!1,"duiRu"==this.dialogType?this.updateMerchantCoinConfig(1):"duiChu"==this.dialogType?this.updateMerchantCoinConfig(2):"feeRateIn"==this.dialogType?this.updateMerchantFee(1):"firstRate"==this.dialogType?this.updateMerchantInfo(2):"secRate"==this.dialogType?this.updateMerchantInfo(3):"daifu"==this.dialogType&&this.updateBatchOutFee()},updateBatchOutFee:function(){var a=this;this.$http.post("/wallet/backmgr/merchant/updateBatchOutFee",{batchOutRatioFee:Math.floor(this.formData.value1)/100,userId:this.pageData.info.userId,batchOutFixedFee:this.formData.value2}).then(function(e){a.$notify.success({title:"提示",message:e.msg}),a.getDetails()})},updateMerchantSwitch:function(a){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantSwitch",{matchSwitch:a,userId:this.pageData.info.userId}).then(function(a){e.$notify.success({title:"提示",message:a.msg}),e.getDetails()})}},computed:{inFee:function(){var a=this,e=0;return this.pageData.feeList.forEach(function(t,i){t.payType!=a.payType||(e=t.inFee)}),Math.floor(1e4*e)/100},outFee:function(){var a=this,e=0;return this.pageData.feeList.forEach(function(t,i){t.payType!=a.payType||(e=t.outFee)}),Math.floor(1e4*e)/100},payTypeName:function(){var a=this,e="";return this.pageData.payList.forEach(function(t,i){t.payType!=a.payType||(e=t.description)}),e}}},"activated",function(){this.getDetails()}),n={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"details"},[t("div",{staticClass:"basic"},[a._m(0),a._v(" "),t("ul",[t("li",[t("label",[a._v("用户名:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.name))])]),a._v(" "),t("li",[t("label",[a._v("身份证号码:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.idNo))])]),a._v(" "),t("li",[t("label",[a._v("手机号码:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.phone))])]),a._v(" "),t("li",[t("label",[a._v("邮箱:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.email))])]),a._v(" "),t("li",[t("label",[a._v("直推人:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.firstPhone))])]),a._v(" "),t("li",[t("label",[a._v("间推人:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.secPhone))])]),a._v(" "),t("li",[t("label",[a._v("上次登录时间:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.lastLoginDate))])]),a._v(" "),t("li",[t("label",[a._v("上次登录IP:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.lastLoginIp))])]),a._v(" "),t("li",[t("label",[a._v("谷歌密钥:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.googleVerify))]),a._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:a.deleteGoogleVerify}},[a._v("删除")])],1),a._v(" "),t("li",[t("label",[a._v("申请时间:")]),a._v(" "),t("span",[a._v(a._s(a.pageData.info.applyDate))])])])]),a._v(" "),t("div",{staticClass:"settable"},[a._m(1),a._v(" "),t("ul",[t("li",[t("label",[a._v("商户兑入手续费:")]),a._v(" "),t("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:a.payType,callback:function(e){a.payType=e},expression:"payType"}},a._l(a.pageData.payList,function(a){return t("el-option",{key:a.payType,attrs:{label:a.description,value:a.payType}})}),1),a._v(" "),t("span",[a._v(a._s(a.inFee)+" %")]),a._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return a.showDialog("feeRateIn")}}},[a._v("修改")])],1),a._v(" "),t("li",[t("label",[a._v("商户兑入方式:")]),a._v(" "),t("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"active-value":1,"inactive-value":0},on:{change:a.updateMerchantSwitch},model:{value:a.pageData.info.matchSwitch,callback:function(e){a.$set(a.pageData.info,"matchSwitch",e)},expression:"pageData.info.matchSwitch"}}),a._v(" "),t("span",{staticStyle:{"margin-left":"15px"}},[t("el-radio",{attrs:{disabled:0==a.pageData.info.matchSwitch,label:1},on:{change:a.inTypeChange},model:{value:a.pageData.info.inType,callback:function(e){a.$set(a.pageData.info,"inType",e)},expression:"pageData.info.inType"}},[a._v("派单")]),a._v(" "),t("el-radio",{attrs:{disabled:0==a.pageData.info.matchSwitch,label:2},on:{change:a.inTypeChange},model:{value:a.pageData.info.inType,callback:function(e){a.$set(a.pageData.info,"inType",e)},expression:"pageData.info.inType"}},[a._v("抢单")])],1)],1),a._v(" "),t("li",[t("label",[a._v("商户兑出手续费:")]),a._v(" "),t("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:a.payType,callback:function(e){a.payType=e},expression:"payType"}},a._l(a.pageData.payList,function(a){return t("el-option",{key:a.payType,attrs:{label:a.description,value:a.payType}})}),1),a._v(" "),t("span",[a._v(a._s(a.outFee)+" %")]),a._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return a.showDialog("feeRateIn")}}},[a._v("修改")])],1),a._v(" "),t("li",[t("label",[a._v("商户兑出方式:")]),a._v(" "),t("span",[t("el-radio",{attrs:{label:1},on:{change:a.outTypeChange},model:{value:a.pageData.info.outType,callback:function(e){a.$set(a.pageData.info,"outType",e)},expression:"pageData.info.outType"}},[a._v("派单")]),a._v(" "),t("el-radio",{attrs:{label:2},on:{change:a.outTypeChange},model:{value:a.pageData.info.outType,callback:function(e){a.$set(a.pageData.info,"outType",e)},expression:"pageData.info.outType"}},[a._v("抢单")])],1)]),a._v(" "),t("li",[t("label",[a._v("兑入额度范围（"+a._s(a.$variableCoin)+"）:")]),a._v(" "),t("span",[a._v("【"+a._s(a.pageData.coinInfo.minIn)+"】 ~ 【"+a._s(a.pageData.coinInfo.maxIn)+"】")]),a._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return a.showDialog("duiRu")}}},[a._v("修改")])],1),a._v(" "),t("li",[t("label",[a._v("兑出额度范围（"+a._s(a.$variableCoin)+"）:")]),a._v(" "),t("span",[a._v("【"+a._s(a.pageData.coinInfo.minOut)+"】 ~ 【"+a._s(a.pageData.coinInfo.maxOut)+"】")]),a._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return a.showDialog("duiChu")}}},[a._v("修改")])],1),a._v(" "),t("li",{staticClass:"big"},[t("label",[a._v("代付兑出手续费比例 : 每单代付数量的")]),a._v(" "),t("el-input",{staticClass:"inputHasText",attrs:{disabled:"",placeholder:"未设置默认1",value:Math.floor(1e4*a.pageData.info.batchOutRatioFee)/100}},[t("template",{slot:"append"},[a._v("%")])],2),a._v("\n\t\t\t\t\t+ 每单固定"),t("el-input",{staticClass:"inputHasText",attrs:{disabled:"",placeholder:"未设置默认1"},model:{value:a.pageData.info.batchOutFixedFee,callback:function(e){a.$set(a.pageData.info,"batchOutFixedFee",e)},expression:"pageData.info.batchOutFixedFee"}},[t("template",{slot:"append"},[a._v("RMT")])],2),a._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return a.showDialog("daifu")}}},[a._v("修改")])],1)])]),a._v(" "),t("el-dialog",{attrs:{title:a.dialogTitle,visible:a.dialogVisible,width:"40%"},on:{"update:visible":function(e){a.dialogVisible=e}}},[t("el-form",{ref:"form",attrs:{model:a.formData,"label-width":"120px"}},[t("el-form-item",{attrs:{label:a.label1}},[t("el-input",{attrs:{type:"number",oninput:"value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3')"},model:{value:a.formData.value1,callback:function(e){a.$set(a.formData,"value1",e)},expression:"formData.value1"}},["feeRateIn"==a.dialogType||"firstRate"==a.dialogType||"secRate"==a.dialogType||"daifu"==a.dialogType?t("template",{slot:"append"},[a._v("%")]):a._e()],2)],1),a._v(" "),t("el-form-item",{attrs:{label:a.label2}},["daifu"==a.dialogType?t("el-input",{attrs:{type:"number",oninput:"value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d\\d\\d).*$/,'$1$2.$3')"},model:{value:a.formData.value2,callback:function(e){a.$set(a.formData,"value2",e)},expression:"formData.value2"}},["daifu"==a.dialogType?t("template",{slot:"append"},[a._v("RMT")]):a._e()],2):t("el-input",{attrs:{type:"number",oninput:"value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3')"},model:{value:a.formData.value2,callback:function(e){a.$set(a.formData,"value2",e)},expression:"formData.value2"}},["feeRateIn"==a.dialogType||"firstRate"==a.dialogType||"secRate"==a.dialogType?t("template",{slot:"append"},[a._v("%")]):a._e()],2)],1)],1),a._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(e){a.dialogVisible=!1}}},[a._v("取 消")]),a._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:a.dialogEnter}},[a._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticClass:"title"},[e("h3",[this._v("基本信息")])])},function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticClass:"title"},[e("h3",[this._v("可设置参数")])])}]};var s=t("VU/8")(l,n,!1,function(a){t("5XEN")},"data-v-644d2366",null);e.default=s.exports},"5XEN":function(a,e){}});