webpackJsonp([32],{"8qGw":function(t,e){},BMiV:function(t,e){},vAx8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={props:["data"],data:function(){return{defaultForm:{CHECK_STAND_SWITCH:"",CHECK_STAND_SKIN_TYPE:"",CHECK_STAND_CHECK_TYPE:"",CHECK_STAND_SIGN_TYPE:"",CHECK_STAND_PAY_TYPE:[]},modes:[{label:"无验证",value:"1"},{label:"手机号验证",value:"2"},{label:"【付费】银行卡要素验证",value:"3"}],payModes:[{label:"需要标记",value:"1"},{label:"不需要标记",value:"2"},{label:"关联抢派单模式",value:"3"}],payList:[]}},activated:function(){},methods:{changeSetting:function(t){var e=this,a="",i="";switch(t){case 4:a=this.defaultForm.CHECK_STAND_SKIN_TYPE;case 5:i=this.defaultForm.CHECK_STAND_PAY_TYPE.join(",");break;case 6:a=this.defaultForm.CHECK_STAND_CHECK_TYPE;break;case 7:a=this.defaultForm.CHECK_STAND_SIGN_TYPE;break;case 8:a=this.defaultForm.CHECK_STAND_SWITCH?1:0}this.$http.post("/wallet/backmgr/merchant/updateMerchantInfo",{userId:this.$route.query.id,type:t,value3:a,value4:i}).then(function(t){e.$notify.success({title:"提示",message:t.msg})})}},watch:{data:function(t,e){var a=this;this.defaultForm.CHECK_STAND_SWITCH=1==t.info.checkStandSwitch,this.defaultForm.CHECK_STAND_SKIN_TYPE=t.info.checkStandSkinType&&t.info.checkStandSkinType.toString(),this.defaultForm.CHECK_STAND_CHECK_TYPE=t.info.checkStandCheckType&&t.info.checkStandCheckType.toString(),this.defaultForm.CHECK_STAND_SIGN_TYPE=t.info.CHECK_STAND_SIGN_TYPE&&t.info.checkStandSginType.toString();var i=t.info.payList.split(",");this.defaultForm.CHECK_STAND_PAY_TYPE=[],i.forEach(function(t){a.defaultForm.CHECK_STAND_PAY_TYPE.push(Number(t))}),this.payList=t.payList}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setCheckstand"},[t._m(0),t._v(" "),i("el-form",{ref:"defaultForm",staticClass:"defaultForm",attrs:{model:t.defaultForm,inline:!0,"label-width":"140px",size:"small"}},[i("el-form-item",{attrs:{label:"开启单独设置："}},[i("el-switch",{attrs:{"active-color":"#13ce66"},on:{change:function(e){return t.changeSetting(8)}},model:{value:t.defaultForm.CHECK_STAND_SWITCH,callback:function(e){t.$set(t.defaultForm,"CHECK_STAND_SWITCH",e)},expression:"defaultForm.CHECK_STAND_SWITCH"}})],1),t._v(" "),t.defaultForm.CHECK_STAND_SWITCH?i("el-form-item",{attrs:{label:"默认皮肤："}},[i("div",{staticClass:"radioBox"},[i("img",{staticStyle:{width:"100px"},attrs:{src:a("ys0R"),alt:""}}),t._v(" "),i("el-radio",{attrs:{label:"1"},on:{change:function(e){return t.changeSetting(4)}},model:{value:t.defaultForm.CHECK_STAND_SKIN_TYPE,callback:function(e){t.$set(t.defaultForm,"CHECK_STAND_SKIN_TYPE",e)},expression:"defaultForm.CHECK_STAND_SKIN_TYPE"}},[t._v("皮肤1")])],1),t._v(" "),i("div",{staticClass:"radioBox"},[i("img",{staticStyle:{width:"100px"},attrs:{src:a("ys0R"),alt:""}}),t._v(" "),i("el-radio",{attrs:{label:"2"},on:{change:function(e){return t.changeSetting(4)}},model:{value:t.defaultForm.CHECK_STAND_SKIN_TYPE,callback:function(e){t.$set(t.defaultForm,"CHECK_STAND_SKIN_TYPE",e)},expression:"defaultForm.CHECK_STAND_SKIN_TYPE"}},[t._v("皮肤2")])],1)]):t._e(),t._v(" "),t.defaultForm.CHECK_STAND_SWITCH?i("el-form-item",{attrs:{label:"收银台支付入口："}},[i("el-checkbox-group",{attrs:{min:1},on:{change:function(e){return t.changeSetting(5)}},model:{value:t.defaultForm.CHECK_STAND_PAY_TYPE,callback:function(e){t.$set(t.defaultForm,"CHECK_STAND_PAY_TYPE",e)},expression:"defaultForm.CHECK_STAND_PAY_TYPE"}},t._l(t.payList,function(e){return i("el-checkbox",{key:e.payType,attrs:{label:e.payType}},[t._v(t._s(e.description))])}),1)],1):t._e(),t._v(" "),t.defaultForm.CHECK_STAND_SWITCH?i("el-form-item",{attrs:{label:"默认验证方式："}},[i("el-radio-group",{model:{value:t.defaultForm.CHECK_STAND_CHECK_TYPE,callback:function(e){t.$set(t.defaultForm,"CHECK_STAND_CHECK_TYPE",e)},expression:"defaultForm.CHECK_STAND_CHECK_TYPE"}},t._l(t.modes,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value},on:{change:function(e){return t.changeSetting(6)}}},[t._v(t._s(e.label))])}),1)],1):t._e(),t._v(" "),t.defaultForm.CHECK_STAND_SWITCH?i("el-form-item",{attrs:{label:"是否标记已付款："}},[i("el-radio-group",{model:{value:t.defaultForm.CHECK_STAND_SIGN_TYPE,callback:function(e){t.$set(t.defaultForm,"CHECK_STAND_SIGN_TYPE",e)},expression:"defaultForm.CHECK_STAND_SIGN_TYPE"}},t._l(t.payModes,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value},on:{change:function(e){return t.changeSetting(7)}}},[t._v(t._s(e.label))])}),1)],1):t._e(),t._v(" "),i("p",{staticClass:"tips"},[t._v("注：商户收银台支付入口单独设置后，全局风控配置将不再生效")])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("收银台设置")])])}]};var n={data:function(){return{radio:"1",coinName:this.$variableCoin,pageData:{coinInfo:{},info:{},payList:[],feeList:[]},formData:{value1:"",value2:""},dialogVisible:!1,dialogType:"",label1:"",label2:"",dialogTitle:"修改",payType:1}},activated:function(){this.getDetails()},methods:{getDetails:function(){var t=this;this.$http.post("/wallet/backmgr/merchant/detail",{userId:this.$route.query.id}).then(function(e){t.pageData=e.result})},updateMerchantExchangeType:function(t){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantExchangeType",t).then(function(t){e.$notify.success({title:"提示",message:t.msg})})},inTypeChange:function(t){this.updateMerchantExchangeType({exchangeType:t,type:1,userId:this.$route.query.id})},outTypeChange:function(t){this.updateMerchantExchangeType({exchangeType:t,type:2,userId:this.$route.query.id})},deleteGoogleVerify:function(){var t=this;this.$prompt("删除后，用户需重置谷歌验证，确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入您的谷歌验证码"}).then(function(e){var a=e.value;t.$http.post("/wallet/backmgr/merchant/deleteGoogleVerify",{userId:t.$route.query.id,secret:a}).then(function(e){t.$notify.success({title:"提示",message:e.msg})})}).catch(function(){})},handleClose:function(){},showDialog:function(t){this.dialogType=t||"","duiRu"==this.dialogType?(this.dialogTitle="修改兑入费率",this.label1="最小兑入额度：",this.label2="最大兑入额度：",this.formData.value1=this.pageData.coinInfo.minIn,this.formData.value2=this.pageData.coinInfo.maxIn):"duiChu"==this.dialogType?(this.dialogTitle="修改兑出费率",this.label1="最小兑出额度：",this.label2="最大兑出额度：",this.formData.value1=this.pageData.coinInfo.minOut,this.formData.value2=this.pageData.coinInfo.maxOut):"feeRateIn"==this.dialogType?(this.dialogTitle="修改商户手续费【"+this.payTypeName+"】",this.label1="商户兑入手续费:",this.label2="商户兑出手续费:",this.formData.value1=this.inFee,this.formData.value2=this.outFee):"firstRate"==this.dialogType?(this.dialogTitle="修改直推人费率",this.label1="兑入佣金费率：",this.label2="兑出佣金费率：",this.formData.value1=this.pageData.info.firstRateIn,this.formData.value2=this.pageData.info.firstRateOut):"secRate"==this.dialogType?(this.dialogTitle="修改间推人费率",this.label1="兑入佣金费率：",this.label2="兑出佣金费率：",this.formData.value1=this.pageData.info.secRateIn,this.formData.value2=this.pageData.info.secRateOut):"daifu"==this.dialogType&&(this.dialogTitle="修改代付兑出手续费比例",this.label1="每单代付费率",this.label2="每单固定金额",this.formData.value1=Math.floor(1e4*this.pageData.info.batchOutRatioFee)/100,this.formData.value2=this.pageData.info.batchOutFixedFee),this.dialogVisible=!0},updateMerchantCoinConfig:function(t){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantCoinConfig",{coinName:this.coinName,type:t,userId:this.$route.query.id,value1:this.formData.value1,value2:this.formData.value2}).then(function(t){e.formData.value1="",e.formData.value2="",e.$notify.success({title:"提示",message:t.msg}),e.getDetails()})},updateMerchantInfo:function(t){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantInfo",{coinName:this.coinName,type:t,userId:this.$route.query.id,value1:this.formData.value1,value2:this.formData.value2}).then(function(t){e.formData.value1="",e.formData.value2="",e.$notify.success({title:"提示",message:t.msg}),e.getDetails()})},updateMerchantFee:function(t){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantFee",{coinName:this.coinName,payType:this.payType,type:t,userId:this.$route.query.id,value1:(this.formData.value1/100).toFixed(4),value2:(this.formData.value2/100).toFixed(4)}).then(function(t){e.formData.value1="",e.formData.value2="",e.$notify.success({title:"提示",message:t.msg}),e.getDetails()})},dialogEnter:function(){this.dialogVisible=!1,"duiRu"==this.dialogType?this.updateMerchantCoinConfig(1):"duiChu"==this.dialogType?this.updateMerchantCoinConfig(2):"feeRateIn"==this.dialogType?this.updateMerchantFee(1):"firstRate"==this.dialogType?this.updateMerchantInfo(2):"secRate"==this.dialogType?this.updateMerchantInfo(3):"daifu"==this.dialogType&&this.updateBatchOutFee()},updateBatchOutFee:function(){var t=this;this.$http.post("/wallet/backmgr/merchant/updateBatchOutFee",{batchOutRatioFee:Math.floor(this.formData.value1)/100,userId:this.pageData.info.userId,batchOutFixedFee:this.formData.value2}).then(function(e){t.$notify.success({title:"提示",message:e.msg}),t.getDetails()})},updateMerchantSwitch:function(t){var e=this;this.$http.post("/wallet/backmgr/merchant/updateMerchantSwitch",{matchSwitch:t,userId:this.pageData.info.userId}).then(function(t){e.$notify.success({title:"提示",message:t.msg}),e.getDetails()})}},computed:{inFee:function(){var t=this,e=0;return this.pageData.feeList.forEach(function(a,i){a.payType!=t.payType||(e=a.inFee)}),Math.floor(1e4*e)/100},outFee:function(){var t=this,e=0;return this.pageData.feeList.forEach(function(a,i){a.payType!=t.payType||(e=a.outFee)}),Math.floor(1e4*e)/100},payTypeName:function(){var t=this,e="";return this.pageData.payList.forEach(function(a,i){a.payType!=t.payType||(e=a.description)}),e}},components:{CheckStand:a("VU/8")(i,l,!1,function(t){a("8qGw")},"data-v-0a424801",null).exports}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details"},[a("div",{staticClass:"basic"},[t._m(0),t._v(" "),a("ul",[a("li",[a("label",[t._v("用户名:")]),t._v(" "),a("span",[t._v(t._s(t.pageData.info.name))])]),t._v(" "),a("li",[a("label",[t._v("身份证号码:")]),t._v(" "),a("span",[t._v(t._s(t.pageData.info.idNo))])]),t._v(" "),a("li",[a("label",[t._v("手机号码:")]),t._v(" "),a("span",[t._v(t._s(t.pageData.info.phone))])]),t._v(" "),a("li",[a("label",[t._v("邮箱:")]),t._v(" "),a("span",[t._v(t._s(t.pageData.info.email))])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),a("li",[a("label",[t._v("上次登录时间:")]),t._v(" "),a("span",[t._v(t._s(t.pageData.info.lastLoginDate))])]),t._v(" "),a("li",[a("label",[t._v("上次登录IP:")]),t._v(" "),a("span",[t._v(t._s(t.pageData.info.lastLoginIp))])]),t._v(" "),a("li",[a("label",[t._v("谷歌密钥:")]),t._v(" "),a("span",[t._v(t._s(t.pageData.info.googleVerify))]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.deleteGoogleVerify}},[t._v("删除")])],1),t._v(" "),a("li",[a("label",[t._v("申请时间:")]),t._v(" "),a("span",[t._v(t._s(t.pageData.info.applyDate))])])])]),t._v(" "),a("div",{staticClass:"settable"},[t._m(3),t._v(" "),a("ul",[a("li",[a("label",[t._v("商户兑入手续费:")]),t._v(" "),a("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:t.payType,callback:function(e){t.payType=e},expression:"payType"}},t._l(t.pageData.payList,function(t){return a("el-option",{key:t.payType,attrs:{label:t.description,value:t.payType}})}),1),t._v(" "),a("span",[t._v(t._s(t.inFee)+" %")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.showDialog("feeRateIn")}}},[t._v("修改")])],1),t._v(" "),a("li",[a("label",[t._v("商户兑出手续费:")]),t._v(" "),a("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:t.payType,callback:function(e){t.payType=e},expression:"payType"}},t._l(t.pageData.payList,function(t){return a("el-option",{key:t.payType,attrs:{label:t.description,value:t.payType}})}),1),t._v(" "),a("span",[t._v(t._s(t.outFee)+" %")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.showDialog("feeRateIn")}}},[t._v("修改")])],1),t._v(" "),a("li",[a("label",[t._v("商户兑出方式:")]),t._v(" "),a("span",[a("el-radio",{attrs:{label:1},on:{change:t.outTypeChange},model:{value:t.pageData.info.outType,callback:function(e){t.$set(t.pageData.info,"outType",e)},expression:"pageData.info.outType"}},[t._v("派单")]),t._v(" "),a("el-radio",{attrs:{label:2},on:{change:t.outTypeChange},model:{value:t.pageData.info.outType,callback:function(e){t.$set(t.pageData.info,"outType",e)},expression:"pageData.info.outType"}},[t._v("抢单")])],1)]),t._v(" "),a("li",[a("label",[t._v("兑入额度范围（"+t._s(t.$variableCoin)+"）:")]),t._v(" "),a("span",[t._v("【"+t._s(t.pageData.coinInfo.minIn)+"】 ~ 【"+t._s(t.pageData.coinInfo.maxIn)+"】")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.showDialog("duiRu")}}},[t._v("修改")])],1),t._v(" "),a("li",[a("label",[t._v("兑出额度范围（"+t._s(t.$variableCoin)+"）:")]),t._v(" "),a("span",[t._v("【"+t._s(t.pageData.coinInfo.minOut)+"】 ~ 【"+t._s(t.pageData.coinInfo.maxOut)+"】")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.showDialog("duiChu")}}},[t._v("修改")])],1),t._v(" "),a("li",{staticClass:"big"},[a("label",[t._v("代付兑出手续费比例 : 每单代付数量的")]),t._v(" "),a("el-input",{staticClass:"inputHasText",attrs:{disabled:"",placeholder:"未设置默认1",value:Math.floor(1e4*t.pageData.info.batchOutRatioFee)/100}},[a("template",{slot:"append"},[t._v("%")])],2),t._v("\n\t\t\t\t\t+ 每单固定"),a("el-input",{staticClass:"inputHasText",attrs:{disabled:"",placeholder:"未设置默认1"},model:{value:t.pageData.info.batchOutFixedFee,callback:function(e){t.$set(t.pageData.info,"batchOutFixedFee",e)},expression:"pageData.info.batchOutFixedFee"}},[a("template",{slot:"append"},[t._v(t._s(this.$variableCoin))])],2),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.showDialog("daifu")}}},[t._v("修改")])],1)])]),t._v(" "),a("CheckStand",{attrs:{data:t.pageData}}),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.formData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:t.label1}},[a("el-input",{attrs:{type:"number",oninput:"value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3')"},model:{value:t.formData.value1,callback:function(e){t.$set(t.formData,"value1",e)},expression:"formData.value1"}},["feeRateIn"==t.dialogType||"firstRate"==t.dialogType||"secRate"==t.dialogType||"daifu"==t.dialogType?a("template",{slot:"append"},[t._v("%")]):t._e()],2)],1),t._v(" "),a("el-form-item",{attrs:{label:t.label2}},["daifu"==t.dialogType?a("el-input",{attrs:{type:"number",oninput:"value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d\\d\\d).*$/,'$1$2.$3')"},model:{value:t.formData.value2,callback:function(e){t.$set(t.formData,"value2",e)},expression:"formData.value2"}},["daifu"==t.dialogType?a("template",{slot:"append"},[t._v(t._s(t.$variableCoin))]):t._e()],2):a("el-input",{attrs:{type:"number",oninput:"value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3')"},model:{value:t.formData.value2,callback:function(e){t.$set(t.formData,"value2",e)},expression:"formData.value2"}},["feeRateIn"==t.dialogType||"firstRate"==t.dialogType||"secRate"==t.dialogType?a("template",{slot:"append"},[t._v("%")]):t._e()],2)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.dialogEnter}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("基本信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("label",[this._v("商户编号:")]),this._v(" "),e("span",[this._v("300625")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("label",[this._v("商户代码:")]),this._v(" "),e("span",[this._v("KSC")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("可设置参数")])])}]};var o=a("VU/8")(n,s,!1,function(t){a("BMiV")},"data-v-44c6ac3a",null);e.default=o.exports}});