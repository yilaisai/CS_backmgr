webpackJsonp([53],{"4jJs":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),l=a.n(i),o=a("NYxO"),r={data:function(){return{form:{otcPayLists:[]},dialogVisible:!1,inFee:0,outFee:0,coinName:this.$variableCoin,payType:"",inSwitch:"1",rushWaitTime:"",formData:{value1:"",value2:""}}},activated:function(){this.getData(),this.getInSwitch()},methods:{getData:function(){var t=this;this.$http.post("/wallet/backmgr/merchant/trade/config",{coinName:this.coinName}).then(function(e){t.form=e.result,t.form.BATCHOUT_RATIO_FEE=Math.floor(1e4*t.form.BATCHOUT_RATIO_FEE)/100,t.form.otcPayLists.length>0&&(t.payType=t.form.otcPayLists[0].payType)})},updateBatchOutFee:function(){var t=this;this.$http.post("/wallet/backmgr/merchant/updateBatchOutFee",{batchOutRatioFee:Math.floor(this.formData.value1)/100,batchOutFixedFee:this.formData.value2}).then(function(e){t.$notify.success({title:"提示",message:e.msg}),t.getDetails()})},modifyInSwitch:function(){var t=this;this.$http.post("/wallet/app/otc/backmgr/modifyInSwitch",{inSwitch:this.inSwitch,rushWaitTime:this.rushWaitTime}).then(function(e){200==e.code&&t.getInSwitch()})},getInSwitch:function(){var t=this;this.$http.post("/wallet/app/otc/backmgr/getInSwitch",{}).then(function(e){200==e.code&&(t.inSwitch=e.result.inSwitch+"",t.rushWaitTime=e.result.rushWaitTime)})},open:function(){var t=this;this.$prompt("请输入谷歌验证码","安全验证",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var a=e.value;t.save(a)}).catch(function(){t.$message({type:"info",message:"取消修改"})})},batchOutRatioFeeInput:function(){this.form.BATCHOUT_RATIO_FEE=this.form.BATCHOUT_RATIO_FEE.replace(/[^\d]/g,"")},showDialog:function(t){this.dialogTitle="",this.formData.value1=this.form.BATCHOUT_RATIO_FEE,this.formData.value2=this.form.BATCHOUT_FIXED_FEE,this.dialogVisible=!0},save:function(t){var e=this;""!=t.trim()?(this.form.secret=t,this.form.inFee=(this.inFee/100).toFixed(4),this.form.outFee=(this.outFee/100).toFixed(4),this.form.payType=this.payType,this.form.BATCHOUT_RATIO_FEE=Math.floor(this.form.BATCHOUT_RATIO_FEE)/100,this.$http.post("/wallet/backmgr/merchant/trade/updateConfig",this.form).then(function(t){e.$notify.success({title:"提示",message:t.msg}),e.getData()})):this.$message({type:"info",message:"谷歌验证码不能为空"})}},watch:{coinName:function(){this.getData()},payType:function(t,e){var a=this;this.form.otcPayLists.forEach(function(t,e){t.payType==a.payType&&(a.inFee=Math.floor(1e4*t.inFee)/100,a.outFee=Math.floor(1e4*t.outFee)/100)})}},computed:l()({},Object(o.b)(["coinInfo"]))},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"init-settings"},[a("div",{staticClass:"current"},[a("div",{staticClass:"title"},[a("h3",[t._v("当前参数")]),t._v(" "),a("div",{staticClass:"select-wrap"},[a("label",[t._v("币种：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.coinName,callback:function(e){t.coinName=e},expression:"coinName"}},[a("el-option",{attrs:{label:"USDT",value:"USDT"}})],1)],1)]),t._v(" "),a("ul",[a("li",[a("label",[t._v(t._s(t.coinName)+"当前市价:")]),a("span",[t._v(t._s(t.form.toRMBPrice))])]),t._v(" "),1==t.form.MERCHANT_RATE_TYPE?a("li",[a("label",[t._v(t._s(t.coinName)+"当前兑入价格:")]),a("span",[t._v(t._s(Math.floor(1e6*(1*t.form.MERCHANT_IN_PRICE+1*t.form.MERCHANT_IN_PRICE_FLOAT))/1e6))])]):a("li",[a("label",[t._v(t._s(t.coinName)+"当前兑入价格:")]),a("span",[t._v(t._s(t.form.MERCHANT_IN_PRICE))])]),t._v(" "),1==t.form.MERCHANT_RATE_TYPE?a("li",[a("label",[t._v(t._s(t.coinName)+"当前兑出价格:")]),a("span",[t._v(t._s(Math.floor(1e6*(1*t.form.MERCHANT_OUT_PRICE+1*t.form.MERCHANT_OUT_PRICE_FLOAT))/1e6))])]):a("li",[a("label",[t._v(t._s(t.coinName)+"当前兑出价格:")]),a("span",[t._v(t._s(t.form.MERCHANT_OUT_PRICE))])])])]),t._v(" "),a("div",{staticClass:"content-wrap"},[a("h3",[t._v("商户设置")]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"兑入兑出价格设置"}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"类型："}},[a("el-radio-group",{model:{value:t.form.MERCHANT_RATE_TYPE,callback:function(e){t.$set(t.form,"MERCHANT_RATE_TYPE",e)},expression:"form.MERCHANT_RATE_TYPE"}},[a("el-radio",{attrs:{label:"1"}},[t._v("系统")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("手动")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"货币："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!0},model:{value:t.form.MERCHANT_COIN_NAME,callback:function(e){t.$set(t.form,"MERCHANT_COIN_NAME","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_COIN_NAME"}})],1),t._v(" "),1==t.form.MERCHANT_RATE_TYPE?a("el-form-item",{attrs:{label:"兑入价格："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!0},model:{value:t.form.MERCHANT_IN_PRICE,callback:function(e){t.$set(t.form,"MERCHANT_IN_PRICE","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_IN_PRICE"}}),t._v("　+　"),a("el-input",{attrs:{placeholder:"输入倍数（如0.9）"},model:{value:t.form.MERCHANT_IN_PRICE_FLOAT,callback:function(e){t.$set(t.form,"MERCHANT_IN_PRICE_FLOAT","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_IN_PRICE_FLOAT"}})],1):a("el-form-item",{attrs:{label:"兑入价格："}},[a("el-input",{model:{value:t.form.MERCHANT_IN_PRICE,callback:function(e){t.$set(t.form,"MERCHANT_IN_PRICE","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_IN_PRICE"}})],1),t._v(" "),1==t.form.MERCHANT_RATE_TYPE?a("el-form-item",{attrs:{label:"兑出价格："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!0},model:{value:t.form.MERCHANT_OUT_PRICE,callback:function(e){t.$set(t.form,"MERCHANT_OUT_PRICE","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_OUT_PRICE"}}),t._v("　+　"),a("el-input",{attrs:{placeholder:"输入倍数（如1.1）"},model:{value:t.form.MERCHANT_OUT_PRICE_FLOAT,callback:function(e){t.$set(t.form,"MERCHANT_OUT_PRICE_FLOAT","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_OUT_PRICE_FLOAT"}})],1):a("el-form-item",{attrs:{label:"兑出价格："}},[a("el-input",{model:{value:t.form.MERCHANT_OUT_PRICE,callback:function(e){t.$set(t.form,"MERCHANT_OUT_PRICE","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_OUT_PRICE"}})],1)],1),t._v(" "),a("p",{staticClass:"tips"},[t._v("提示：价格默认使用系统设置的价格，开启手动设置的价格，则自动关闭系统价格，关闭手动设置的价格，则自动开启系统价格。")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"商户初始化设置"}},[a("el-form",{ref:"form",attrs:{model:t.form,inline:!0,"label-width":"155px",size:"small"}},[a("el-form-item",{attrs:{label:"支付方式："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.payType,callback:function(e){t.payType=e},expression:"payType"}},t._l(t.form.otcPayLists,function(t){return a("el-option",{key:t.payType,attrs:{label:t.description,value:t.payType}})}),1)],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"商户兑入手续费比例："}},[a("el-input",{attrs:{type:"number",placeholder:"未设置默认1.5%"},on:{input:function(e){t.inFee=t.inFee.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}},model:{value:t.inFee,callback:function(e){t.inFee="string"==typeof e?e.trim():e},expression:"inFee"}},[a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"商户兑出手续费比例："}},[a("el-input",{attrs:{type:"number",placeholder:"未设置默认0.3%"},on:{input:function(e){t.outFee=t.outFee.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}},model:{value:t.outFee,callback:function(e){t.outFee="string"==typeof e?e.trim():e},expression:"outFee"}},[a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"商户最小兑入额度："}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.MERCHANT_MIN_IN_AMOUNT,callback:function(e){t.$set(t.form,"MERCHANT_MIN_IN_AMOUNT","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_MIN_IN_AMOUNT"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商户最大兑入额度："}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.MERCHANT_MAX_IN_AMOUNT,callback:function(e){t.$set(t.form,"MERCHANT_MAX_IN_AMOUNT","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_MAX_IN_AMOUNT"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"商户最小兑出额度："}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.MERCHANT_MIN_OUT_AMOUNT,callback:function(e){t.$set(t.form,"MERCHANT_MIN_OUT_AMOUNT","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_MIN_OUT_AMOUNT"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商户最大兑出额度："}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.MERCHANT_MAX_OUT_AMOUNT,callback:function(e){t.$set(t.form,"MERCHANT_MAX_OUT_AMOUNT","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_MAX_OUT_AMOUNT"}})],1)],1),t._v(" "),a("p",{staticClass:"tips"},[t._v("提示：商户默认该参数，可在商户查询模块单独配置该参数。初始化设置修改后只对新增商户生效。")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"全局设置"}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"170px",size:"small"}},["USDT"==t.coinName?a("el-form-item",{attrs:{label:"omni提币手续费:"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.MERCHANT_WITHDRAW_RATE_OMNI,callback:function(e){t.$set(t.form,"MERCHANT_WITHDRAW_RATE_OMNI","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_WITHDRAW_RATE_OMNI"}})],1):t._e(),t._v(" "),"USDT"==t.coinName?a("el-form-item",{attrs:{label:"Erc20提币手续费:"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.MERCHANT_WITHDRAW_RATE_ERC20,callback:function(e){t.$set(t.form,"MERCHANT_WITHDRAW_RATE_ERC20","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_WITHDRAW_RATE_ERC20"}})],1):a("el-form-item",{attrs:{label:"提币手续费："}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.MERCHANT_WITHDRAW_RATE,callback:function(e){t.$set(t.form,"MERCHANT_WITHDRAW_RATE","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_WITHDRAW_RATE"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"转账手续费："}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.MERCHANT_TRADE_RATE,callback:function(e){t.$set(t.form,"MERCHANT_TRADE_RATE","string"==typeof e?e.trim():e)},expression:"form.MERCHANT_TRADE_RATE"}})],1),t._v(" "),a("el-form-item",{staticClass:"bold",attrs:{label:"商户兑入方式："}},[a("span",{staticStyle:{"margin-left":"15px"}},[a("el-radio",{attrs:{label:"1"},on:{change:t.modifyInSwitch},model:{value:t.inSwitch,callback:function(e){t.inSwitch=e},expression:"inSwitch"}},[t._v("派单")]),t._v(" "),a("el-radio",{attrs:{label:"2"},on:{change:t.modifyInSwitch},model:{value:t.inSwitch,callback:function(e){t.inSwitch=e},expression:"inSwitch"}},[t._v("抢单")])],1)]),t._v(" "),a("el-form-item",{attrs:{label:"抢单转派单时间："}},[a("el-input",{attrs:{placeholder:"请输入时间"},on:{blur:t.modifyInSwitch},model:{value:t.rushWaitTime,callback:function(e){t.rushWaitTime=e},expression:"rushWaitTime"}},[a("template",{slot:"append"},[t._v("S")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"商户批量兑出最大笔数："}},[a("el-input",{attrs:{placeholder:"请输入兑出最大笔数"},model:{value:t.form.CASHOUT_NUM,callback:function(e){t.$set(t.form,"CASHOUT_NUM",e)},expression:"form.CASHOUT_NUM"}})],1)],1)],1)],1),t._v(" "),a("el-button",{staticClass:"save",attrs:{type:"primary"},on:{click:t.open}},[t._v("保存修改")])],1),t._v(" "),a("el-dialog",{attrs:{title:"修改代付兑出手续费比例",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"每单代付费率"}},[a("el-input",{attrs:{type:"number",oninput:"value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3')"},model:{value:t.formData.value1,callback:function(e){t.$set(t.formData,"value1",e)},expression:"formData.value1"}},[a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"每单固定金额"}},[a("el-input",{attrs:{type:"number",oninput:"value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d\\d\\d).*$/,'$1$2.$3')"},model:{value:t.formData.value2,callback:function(e){t.$set(t.formData,"value2",e)},expression:"formData.value2"}},[a("template",{slot:"append"},[t._v(t._s(t.coinName))])],2)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.updateBatchOutFee}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(r,s,!1,function(t){a("f0hQ")},"data-v-47d8a5db",null);e.default=n.exports},f0hQ:function(t,e){}});