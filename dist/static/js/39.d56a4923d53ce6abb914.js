webpackJsonp([39],{"4+Qx":function(e,l,r){"use strict";Object.defineProperty(l,"__esModule",{value:!0});r("oTFt"),r("9GaO"),r("v/ij");var t=r("aiqZ"),n=r("r+cd"),a=r.n(n),o={name:"sendEmail",components:{quillEditor:t.quillEditor},data:function(){return{postObj:{receiver:"",subject:"",content:""},rules:{subject:[{required:!0,message:"请输入邮件标题",trigger:"blur"}],content:[{required:!0,message:"请输入邮件内容",trigger:"blur"}]},disabled:!1,originUrl:"",uploadData:{},photoUrl:"",uploadType:"",serverPath:"",fullscreenLoading:!1}},methods:{resetForm:function(){this.postObj={receiver:"",subject:"",content:""},this.isTeamImg=!1,this.isTeamDoc=!1,this.isMarketImg=!1,this.isMarketDoc=!1,this.teamIntroduceUrl="",this.marketingIntroduceUrl="",this.$refs.postObj&&this.$refs.postObj.resetFields()},save:function(){var e=this;this.$refs.postObj.validate(function(l){if(!l)return!1;e.$http.post("supernode/backmgr/team/mail/send",e.postObj).then(function(l){200==l.code&&e.$notify({title:"成功",message:l.msg,type:"success"}),e.$router.go(-1)})})},beforeUpload:function(e){if(e.size>1048576)return this.$notify({title:"提示",message:"图片大小不得超过1M",type:"warning"}),!1},upScuccess:function(e,l,r){this.fullscreenLoading=!1;var t=this,n="";if("image"===this.uploadType?n=l.response.result.urls[0]:this.uploadType,null!=n&&n.length>0){var o=n;t.addRange=t.$refs.myQuillEditor.quill.getSelection(),t.$refs.myQuillEditor.quill.insertEmbed(null!==t.addRange?t.addRange.index:0,t.uploadType,o,a.a.sources.USER)}else this.$message.error(t.uploadType+"插入失败");this.$refs.upload.clearFiles()},imgHandler:function(e){(this.addRange=this.$refs.myQuillEditor.quill.getSelection(),e)&&document.getElementById("imgInput").click();this.uploadType="image"},videoHandler:function(e){(this.addRange=this.$refs.myQuillEditor.quill.getSelection(),e)&&document.getElementById("imgInput").click();this.uploadType="video"}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){this.serverPath=window.SERVER_PATH,this.$refs.myQuillEditor.quill.getModule("toolbar").addHandler("image",this.imgHandler),this.$refs.myQuillEditor.quill.getModule("toolbar").addHandler("video",this.videoHandler)},activated:function(){this.resetForm(),this.postObj={url:"",title:"",content:"",pageType:1},this.disabled=!1,this.originUrl=""}},s={render:function(){var e=this,l=e.$createElement,r=e._self._c||l;return r("div",{staticClass:"sendEmail"},[r("el-row",{staticStyle:{"margin-bottom":"20px"}},[r("el-col",{attrs:{span:20}},[r("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(l){return e.$router.go(-1)}}},[e._v("返回")])],1),e._v(" "),e.disabled?e._e():r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(l){return e.save(l)}}},[e._v("发送")])],1)],1),e._v(" "),r("el-form",{ref:"postObj",attrs:{inline:!0,"label-width":"100px",rules:e.rules,model:e.postObj}},[r("el-form-item",{attrs:{label:"发件人："}},[r("span",[e._v(" "+e._s(e.$route.params&&e.$route.params.fromName)+" ")])]),e._v(" "),r("el-form-item",{attrs:{size:"small",prop:"receiver",label:"收件人：",rules:[{required:!0,message:"请输入收件人邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}},[r("el-input",{model:{value:e.postObj.receiver,callback:function(l){e.$set(e.postObj,"receiver",l)},expression:"postObj.receiver"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮件主题：",prop:"subject"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入标题",disabled:e.disabled},model:{value:e.postObj.subject,callback:function(l){e.$set(e.postObj,"subject","string"==typeof l?l.trim():l)},expression:"postObj.subject"}})],1),e._v(" "),r("quill-editor",{ref:"myQuillEditor",attrs:{disabled:e.disabled},model:{value:e.postObj.content,callback:function(l){e.$set(e.postObj,"content","string"==typeof l?l.trim():l)},expression:"postObj.content"}}),e._v(" "),r("el-upload",{ref:"upload",staticClass:"upload",staticStyle:{display:"none"},attrs:{action:e.serverPath+"wallet/backmgr/uploadFile",name:"files",data:{type:"html"},"on-success":e.upScuccess,"before-upload":e.beforeUpload}},[r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{size:"small",type:"primary",id:"imgInput","element-loading-text":"插入中,请稍候"}},[e._v("点击上传\n      ")])],1),e._v(" "),r("el-form-item",{attrs:{label:"",prop:"content"}})],1)],1)},staticRenderFns:[]};var i=r("C7Lr")(o,s,!1,function(e){r("hiPe")},null,null);l.default=i.exports},hiPe:function(e,l){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: Cannot find module 'tslib'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:594:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:520:25)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\dist\\less.cjs.js:3:13)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:551:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:543:3)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\index.js:1:80)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:195:19)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:367:11\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:172:11\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:32:11)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:365:2)\n    at NormalModule.doBuild (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:182:3)\n    at NormalModule.build (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:275:15)")}});