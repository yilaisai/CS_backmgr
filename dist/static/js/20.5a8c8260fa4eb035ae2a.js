webpackJsonp([20],{YgGT:function(t,e){},x68E:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("mvHQ"),s=i.n(l),a={name:"send-money",data:function(){var t=function(t,e,i){/^[0-9]*$/i.test(e)?i():i(new Error(t.message))};return{pageNum:1,pageSize:20,listData:{total:null,list:[]},dialogTitle:"",dialogFormVisible:!1,ruleForm:{minAmount:"",maxAmount:"",amount:""},rules:{minAmount:[{required:!0,message:"请输入数额",trigger:"blur"},{validator:t,message:"大于等于必须为数字"}],maxAmount:[{required:!0,message:"请输入数额",trigger:"blur"},{validator:t,message:"小于等于必须为数字"}],amount:[{required:!0,message:"请输入送币数量",trigger:"blur"},{validator:t,message:"送币数量必须为数字"}]}}},methods:{resetForm:function(){this.ruleForm={minAmount:"",maxAmount:"",amount:""},this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},getPaginationChange:function(t,e){this.pageSize=t,this.pageNum=e,this.getRegistInviteRule()},formatSex:function(t,e){return">="+t.minAmount+"  <="+t.maxAmount},getRegistInviteRule:function(){var t=this,e=this.pageNum,i=this.pageSize;this.$http.post("wallet/backmgr/registInviteRule/getRegistInviteRule.do",{pageNum:e,pageSize:i}).then(function(e){var i=e.result.list,l=i.list,s=i.total;t.listData.list=l,t.listData.total=s})},switchChange:function(t){var e=this,i=t.isOnshelf,l=t.id;this.$http.post("wallet/backmgr/registInviteRule/updateRegistInviteRuleIsOnShelf.do",{isOnShelf:i?"YES":"NO",id:l}).then(function(t){e.$notify({title:"成功",message:(i?"上架":"下架")+" 成功",type:"success"}),e.getRegistInviteRule()})},remove:function(t){var e=this,i=t.id;this.$confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("wallet/backmgr/registInviteRule/updateRegistInviteRuleStatue.do",{sysStatus:"INVALID0",id:i}).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success"}),e.getRegistInviteRule()})})},addSend:function(){this.dialogTitle="创建送币规则",this.dialogFormVisible=!0,this.resetForm()},modification:function(t){this.dialogTitle="修改送币规则",this.dialogFormVisible=!0,this.resetForm(),this.ruleForm=JSON.parse(s()(t))},determine:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;t.ruleForm.id?t.$http.post("wallet/backmgr/registInviteRule/updatecreateRegistInviteRule.do",t.ruleForm).then(function(e){t.$notify({title:"成功",message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.getRegistInviteRule()}):t.$http.post("wallet/backmgr/registInviteRule/createRegistInviteRule.do",t.ruleForm).then(function(e){t.$notify({title:"成功",message:"创建成功",type:"success"}),t.dialogFormVisible=!1,t.getRegistInviteRule()})})}},activated:function(){this.getRegistInviteRule()}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"send-money"},[i("el-col",{staticStyle:{"text-align":"right","margin-bottom":"30px"},attrs:{span:22}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addSend}},[t._v("创建送币规则")])],1),t._v(" "),i("sac-table",{attrs:{data:t.listData.list}},[i("el-table-column",{attrs:{prop:"minAmount",label:"持币数量",formatter:t.formatSex}}),t._v(" "),i("el-table-column",{attrs:{prop:"amount",label:"送币数量"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",disabled:0!=e.row.isOnshelf,size:"small"},nativeOn:{click:function(i){t.modification(e.row)}}},[t._v("修改\n        ")]),t._v(" "),i("el-button",{attrs:{type:"danger",disabled:0!=e.row.isOnshelf,size:"small"},nativeOn:{click:function(i){t.remove(e.row)}}},[t._v("\n          删除\n        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"上架",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"inactive-value":0,"active-value":1},nativeOn:{click:function(i){t.switchChange(e.row)}},model:{value:e.row.isOnshelf,callback:function(i){t.$set(e.row,"isOnshelf",i)},expression:"scope.row.isOnshelf"}})]}}])})],1),t._v(" "),i("sac-pagination",{directives:[{name:"show",rawName:"v-show",value:t.listData.list.length>0,expression:"listData.list.length>0"}],attrs:{total:+t.listData.total,"page-size":t.pageSize,"current-page":t.pageNum},on:{handleChange:t.getPaginationChange}}),t._v(" "),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"持币数量:",required:""}},[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"minAmount"}},[i("span",{staticClass:"input-before-lable1"},[t._v("大于等于")]),t._v(" "),i("el-input",{staticClass:"min-input",staticStyle:{width:"130px"},attrs:{clearable:"",size:"small",placeholder:"请输入数额"},model:{value:t.ruleForm.minAmount,callback:function(e){t.$set(t.ruleForm,"minAmount",e)},expression:"ruleForm.minAmount"}})],1)],1),t._v(" "),i("el-col",{staticClass:"line",attrs:{span:2}}),t._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"maxAmount"}},[i("span",{staticClass:"input-before-lable"},[t._v("小于等于")]),t._v(" "),i("el-input",{staticClass:"min-input",staticStyle:{width:"130px"},attrs:{clearable:"",size:"small",placeholder:"请输入数额"},model:{value:t.ruleForm.maxAmount,callback:function(e){t.$set(t.ruleForm,"maxAmount",e)},expression:"ruleForm.maxAmount"}})],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"送币数量:",prop:"amount"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入数额"},model:{value:t.ruleForm.amount,callback:function(e){t.$set(t.ruleForm,"amount",e)},expression:"ruleForm.amount"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.determine}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(t){i("YgGT")},null,null);e.default=o.exports}});
//# sourceMappingURL=20.5a8c8260fa4eb035ae2a.js.map