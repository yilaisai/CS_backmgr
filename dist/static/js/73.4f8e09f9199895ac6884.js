webpackJsonp([73],{BsiV:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=a("3cXf"),o=a.n(t),l=a("KH7x"),n=a.n(l),s=a("Q+Ik"),i=a.n(s),d={name:"node-modify",data:function(){return{server_path:"",currentForm:{},ruleForm:{teamName:"",sacBoxAccount:"",logoUrl:"",email:"",nodeIntroduce:"",teamIntroduce:"",teamIntroduceUrl:"",officialAddr:"",marketingIntroduce:"",marketingIntroduceUrl:""},teamIntroduceUrl:"",isTeamImg:!1,isTeamDoc:!1,isMarketImg:!1,isMarketDoc:!1,loading:!1,uploadTeamLoading:!1,uploadIntroduceLoading:!1,marketingIntroduceUrl:"",rules:{teamName:[{required:!0,message:"请输入节点名称",trigger:"blur"}],sacBoxAccount:[{required:!0,message:"请输入Sacbox账号",trigger:"blur"}],nodeIntroduce:[{required:!0,message:"请输入节点简介",trigger:"blur"}]}}},methods:{resetForm:function(){this.ruleForm={teamName:"",sacBoxAccount:"",logoUrl:"",email:"",nodeIntroduce:"",teamIntroduce:"",teamIntroduceUrl:"",officialAddr:"",marketingIntroduce:"",marketingIntroduceUrl:""},this.isTeamImg=!1,this.isTeamDoc=!1,this.isMarketImg=!1,this.isMarketDoc=!1,this.teamIntroduceUrl="",this.marketingIntroduceUrl="",this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},upload:function(e,r,a){this.ruleForm.logoUrl=e.result.urls[0],this.loading=!1},logoUpload:function(){this.loading=!0},uploadTeamIntroduce:function(e,r,a){this.ruleForm.teamIntroduceUrl=e.result.urls[0],this.teamIntroduceUrl=r.name,r.name.indexOf(".jpg")>-1||r.name.indexOf(".jpeg")>-1||r.name.indexOf(".png")>-1?(this.isTeamImg=!0,this.isTeamDoc=!1):(this.isTeamImg=!1,this.isTeamDoc=!0),this.uploadTeamLoading=!1},teamUpload:function(e){this.beforeUpload(e),this.uploadTeamLoading=!0},uploadIntroduceUrl:function(e,r,a){this.ruleForm.marketingIntroduceUrl=e.result.urls[0],this.marketingIntroduceUrl=r.name,r.name.indexOf(".jpg")>-1||r.name.indexOf(".jpeg")>-1||r.name.indexOf(".png")>-1?(this.isMarketImg=!0,this.isMarketDoc=!1):(this.isMarketImg=!1,this.isMarketDoc=!0),this.uploadIntroduceLoading=!1},introduceUpload:function(e){this.beforeUpload(e),this.uploadIntroduceLoading=!0},beforeUpload:function(e){var r=["application/vnd.openxmlformats-officedocument.wordprocessingmlcument","application/pdf","application/msword","application/vnd.ms-powerpoint","image/jpeg","image/png"].includes(e.type),a=e.size/1024/1024<3;return r||this.$message.error("上传文件类型只能是 pdf/word/ppt/jpg/png  格式!"),a||this.$message.error("上传文件类型大小不能超过 3M!"),r&&a},determine:function(){var e=this;this.$refs.ruleForm.validate(function(r){r&&(e.ruleForm.teamId?(i()(e.ruleForm).forEach(function(r){var a=n()(r,2),t=a[0],o=a[1];o==e.currentForm[t]||o||(e.ruleForm[t]="empty")}),e.$http.post("supernode/backmgr/team/detail/update",e.ruleForm).then(function(r){e.$notify({title:"成功",message:"修改 "+e.ruleForm.teamName+" 节点成功",type:"success"}),e.resetForm(),e.$router.go(-1)})):e.$http.post("supernode/backmgr/team/detail/add",e.ruleForm).then(function(r){e.$notify({title:"成功",message:"创建 "+e.ruleForm.teamName+" 节点成功",type:"success"}),e.resetForm(),e.pageNum=1,e.$router.go(-1)}))})}},activated:function(){var e=this;this.server_path=SERVER_PATH,this.resetForm();var r=this.$route.params;r.teamId&&(this.currentForm=JSON.parse(o()(r)),i()(r).forEach(function(r){var a=n()(r,2),t=a[0],o=a[1];""==e.ruleForm[t]&&(e.ruleForm[t]=o||"")}),this.ruleForm.teamId=r.teamId,this.teamIntroduceUrl=r.teamIntroduceUrl?r.teamIntroduceUrl.split("supersac_doc/")[1]:"",this.marketingIntroduceUrl=r.marketingIntroduceUrl?r.marketingIntroduceUrl.split("supersac_doc/")[1]:"",this.teamIntroduceUrl&&(this.teamIntroduceUrl.indexOf(".jpg")>-1||this.teamIntroduceUrl.indexOf(".jpeg")>-1||this.teamIntroduceUrl.indexOf(".png")>-1?(this.isTeamImg=!0,this.isTeamDoc=!1):(this.isTeamImg=!1,this.isTeamDoc=!0)),this.marketingIntroduceUrl&&(this.marketingIntroduceUrl.indexOf(".jpg")>-1||this.marketingIntroduceUrl.indexOf(".jpeg")>-1||this.marketingIntroduceUrl.indexOf(".png")>-1?(this.isMarketImg=!0,this.isMarketDoc=!1):(this.isMarketImg=!1,this.isMarketDoc=!0)))}},u={render:function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"node-modify"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,inline:!0,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"节点名称:",prop:"teamName"}},[a("span",{staticClass:"tips tips_input"},[e._v(e._s(e.ruleForm.teamName?e.ruleForm.teamName.length:0)+"/15")]),e._v(" "),a("el-input",{attrs:{size:"small",width:"100%",placeholder:"请输入节点名称"},model:{value:e.ruleForm.teamName,callback:function(r){e.$set(e.ruleForm,"teamName",r)},expression:"ruleForm.teamName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{position:"relative"},attrs:{label:"节点简介:",prop:"nodeIntroduce"}},[a("span",{staticClass:"tips tips_textarea"},[e._v(e._s(e.ruleForm.nodeIntroduce?e.ruleForm.nodeIntroduce.length:0)+"/500")]),e._v(" "),a("el-input",{attrs:{size:"small",type:"textarea",rows:3,width:"100%",maxlength:"50",placeholder:"请输入节点简介"},model:{value:e.ruleForm.nodeIntroduce,callback:function(r){e.$set(e.ruleForm,"nodeIntroduce",r)},expression:"ruleForm.nodeIntroduce"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Sacbox账号:",prop:"sacBoxAccount"}},[a("el-input",{attrs:{size:"small",width:"100%",placeholder:"请输入Sacbox账号"},model:{value:e.ruleForm.sacBoxAccount,callback:function(r){e.$set(e.ruleForm,"sacBoxAccount",r)},expression:"ruleForm.sacBoxAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",prop:"email",label:"邮箱:",rules:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}},[a("el-input",{model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),e._v(" "),a("sac-input",{ref:"offcialurl",attrs:{label:"官网地址",prop:"offcialurl"},model:{value:e.ruleForm.officialAddr,callback:function(r){e.$set(e.ruleForm,"officialAddr",r)},expression:"ruleForm.officialAddr"}}),e._v(" "),a("el-form-item",{attrs:{label:"logo:"}},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"avatar-uploader",attrs:{name:"files",action:e.server_path+"wallet/backmgr/uploadFile","show-file-list":!1,"on-success":e.upload,"before-upload":e.logoUpload,data:{type:"supersac_img"}}},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.logoUrl,expression:"ruleForm.logoUrl"}],staticClass:"avatar",attrs:{src:e.ruleForm.logoUrl}}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.ruleForm.logoUrl,expression:"!ruleForm.logoUrl"}],staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"团队介绍:"}},[a("el-input",{attrs:{size:"small",type:"textarea",rows:3,width:"100%",maxlength:"50",placeholder:"请输入团队介绍或上传团队介绍文档"},model:{value:e.ruleForm.teamIntroduce,callback:function(r){e.$set(e.ruleForm,"teamIntroduce",r)},expression:"ruleForm.teamIntroduce"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传团队介绍:"}},[a("span",{staticClass:"appIcon"},[e._v("只能上传 pdf/word/ppt/jpg/png文件，且不超过 3M")]),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.isTeamDoc,expression:"isTeamDoc"}],staticClass:"el-upload-list__item-name",attrs:{target:"_blank",href:e.ruleForm.teamIntroduceUrl}},[a("i",{staticClass:"el-icon-document"}),e._v(e._s(e.teamIntroduceUrl)+"\n      ")]),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isTeamImg,expression:"isTeamImg"},{name:"viewer",rawName:"v-viewer"}],staticClass:"introduce",attrs:{src:e.ruleForm.teamIntroduceUrl}}),e._v(" "),a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadTeamLoading,expression:"uploadTeamLoading"}],staticClass:"upload-demo",attrs:{name:"files",action:e.server_path+"wallet/backmgr/uploadFile","show-file-list":!1,"on-success":e.uploadTeamIntroduce,"before-upload":e.teamUpload,data:{type:"supersac_doc"}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"运营及宣传方案:"}},[a("el-input",{attrs:{size:"small",type:"textarea",rows:3,width:"100%",maxlength:"50",placeholder:"请输入运营及宣传方案或上传运营及宣传方案文档"},model:{value:e.ruleForm.marketingIntroduce,callback:function(r){e.$set(e.ruleForm,"marketingIntroduce",r)},expression:"ruleForm.marketingIntroduce\t"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传运营及宣传方案:"}},[a("span",{staticClass:"appIcon"},[e._v("只能上传 pdf/word/ppt/jpg/png 文件，且不超过 3M")]),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.isMarketDoc,expression:"isMarketDoc"}],staticClass:"el-upload-list__item-name",attrs:{target:"_blank",href:e.ruleForm.marketingIntroduceUrl}},[a("i",{staticClass:"el-icon-document"}),e._v(e._s(e.marketingIntroduceUrl)+"\n      ")]),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isMarketImg,expression:"isMarketImg"},{name:"viewer",rawName:"v-viewer"}],staticClass:"introduce",attrs:{src:e.ruleForm.marketingIntroduceUrl}}),e._v(" "),a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadIntroduceLoading,expression:"uploadIntroduceLoading"}],staticClass:"upload-demo",attrs:{name:"files",action:e.server_path+"wallet/backmgr/uploadFile","show-file-list":!1,"before-upload":e.introduceUpload,"on-success":e.uploadIntroduceUrl,data:{type:"supersac_doc"}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(r){return e.$router.go(-1)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.determine}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(d,u,!1,function(e){a("Hmmx")},null,null);r.default=m.exports},Hmmx:function(e,r){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: Cannot find module 'tslib'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:594:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:520:25)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\dist\\less.cjs.js:3:13)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:551:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:543:3)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous> (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_less@3.11.0@less\\index.js:1:80)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:713:10)\n    at Module.load (internal/modules/cjs/loader.js:612:32)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:195:19)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:367:11\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:172:11\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:32:11)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:165:10)\n    at E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:176:18\n    at loadLoader (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\loadLoader.js:47:3)\n    at iteratePitchingLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:169:2)\n    at runLoaders (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_loader-runner@2.4.0@loader-runner\\lib\\LoaderRunner.js:365:2)\n    at NormalModule.doBuild (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:182:3)\n    at NormalModule.build (E:\\20200210\\new\\wallet-backmgr\\node_modules\\_webpack@3.12.0@webpack\\lib\\NormalModule.js:275:15)")}});