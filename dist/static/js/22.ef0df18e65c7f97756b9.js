webpackJsonp([22],{ndKW:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("mvHQ"),l=o.n(i),s={name:"client",data:function(){return{list:[],ruleForm:{version:"",downUrl:""},dialogTitle:"修改",dialogFormVisible:!1}},methods:{getAppVersionInfoList:function(){var e=this;this.pageNum,this.pageSize;this.$http.post("wallet/backmgr/version/getAppVersionInfoList.do").then(function(t){var o=t.result.list.list;e.list=o})},updateAppversionInfoForceUpdate:function(e){var t=this;this.$http.post("wallet/backmgr/version/updateAppversionInfoForceUpdate.do",{isForceUpdate:e.forceUpdate?"YES":"NO",versionId:e.id}).then(function(e){t.$notify({title:"成功",message:e.msg,type:"success"}),t.getAppVersionInfoList()})},switchChange:function(e){var t=this;this.$http.post("wallet/backmgr/version/updateAppVersionInfoOnshelf.do",{isOnshelf:e.isOnShelf?"YES":"NO",versionId:e.id}).then(function(e){t.$notify({title:"成功",message:e.msg,type:"success"}),t.getAppVersionInfoList()})},modification:function(e){this.dialogTitle="修改"+(2==e.plat?"iOS":"android"),this.dialogFormVisible=!0,this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.ruleForm=JSON.parse(l()(e))},determine:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;e.$http.post("wallet/backmgr/version/updateAppversionInfo.do",{plat:2==e.ruleForm.plat?"ios":"adr",versionId:e.ruleForm.id,version:e.ruleForm.version||"empty",downUrl:e.ruleForm.downUrl||"empty"}).then(function(t){e.$notify({title:"成功",message:"修改成功",type:"success"}),e.dialogFormVisible=!1,e.getAppVersionInfoList()})})}},activated:function(){this.getAppVersionInfoList()}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"client"},[o("sac-table",{attrs:{data:e.list}},[o("el-table-column",{attrs:{label:"系统"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(2==t.row.plat?"iOS":1==t.row.plat?"android":""))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"版本号",prop:"version"}}),e._v(" "),o("el-table-column",{attrs:{prop:"downUrl",label:"下载链接"}}),e._v(" "),o("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"success",size:"small"},nativeOn:{click:function(o){e.modification(t.row)}}},[e._v("修改")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"强制更新",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{attrs:{"inactive-value":0,"active-value":1},nativeOn:{click:function(o){e.updateAppversionInfoForceUpdate(t.row)}},model:{value:t.row.forceUpdate,callback:function(o){e.$set(t.row,"forceUpdate",o)},expression:"scope.row.forceUpdate"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"上架",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{attrs:{"inactive-value":0,"active-value":1},nativeOn:{click:function(o){e.switchChange(t.row)}},model:{value:t.row.isOnShelf,callback:function(o){e.$set(t.row,"isOnShelf",o)},expression:"scope.row.isOnShelf"}})]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"130px"}},[o("el-form-item",{attrs:{label:"版本号：",prop:"version"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入版本号"},model:{value:e.ruleForm.version,callback:function(t){e.$set(e.ruleForm,"version",t)},expression:"ruleForm.version"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"下载链接：",prop:"version"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入下载链接"},model:{value:e.ruleForm.downUrl,callback:function(t){e.$set(e.ruleForm,"downUrl",t)},expression:"ruleForm.downUrl"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.determine}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=o("VU/8")(s,r,!1,function(e){o("vI4o")},null,null);t.default=n.exports},vI4o:function(e,t){}});