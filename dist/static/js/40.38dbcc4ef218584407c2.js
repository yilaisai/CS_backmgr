webpackJsonp([40],{"3qsG":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("lvKI"),a={name:"user",data:function(){return{filterForm:{phone:"",nickName:"",cardNo:"",coinAddr:"",pageNum:1,pageSize:20},listData:{total:null,list:[]},dialogTitle:"创建用户",ruleForm:{phone:"",pwd:"",nickName:""},rules:{phone:[{required:!0,validator:function(t,e,r){e||r(new Error("请输入用户名")),r()},trigger:"blur"}],pwd:[{required:!0,validator:function(t,e,r){return!e||e.length<6||e.length>16?r(new Error("请输入6-16位密码")):/(?=.*[a-z])(?=.*\d)(?=.*[#@!~%^&*.])[a-z\d#@!~%^&*.]/i.test(e)?void r():r(new Error("登录密码必须是字母、数字和符号的组合"))},trigger:"blur"}]},dialogFormVisible:!1}},methods:{resetForm:function(){this.$refs.phone.reset(),this.$refs.nickName.reset(),this.$refs.cardNo.reset(),this.$refs.coinAddr.reset(),this.$refs.filterForm.resetFields(),this.listData.list=[]},submitForm:function(t){this.filterForm.pageNum=t;var e=this.filterForm,r=e.phone,o=e.nickName,a=e.cardNo,l=e.coinAddr;r||o||a||l?this.getUserInfoList():this.$notify.error({title:"错误",message:"查询内容不能为空"})},getUserInfoList:function(){var t=this;this.$http.post("/wallet/backmgr/user/getUserInfoList.do",this.filterForm).then(function(e){var r=e.result.list,o=r.list,a=r.total;t.listData.list=o,t.listData.total=a})},getPaginationChange:function(t,e){this.filterForm.pageSize=t,this.submitForm(e)},goDetail:function(t){this.$router.push({name:"capital-detail",query:{phone:t}})},goInviteDetail:function(t){this.$router.push({name:"invite-detail",query:{phone:t}})},optStatusChange:function(t,e,r){var o=this,a=this.$createElement;this.$msgbox({title:"提示",message:a("p",null,[a("span",null,"确定执行 "),a("span",{style:"color: red"},e+" "),a("span",{style:"color: #0a52e0"},""+r.phone),a("span",null," 吗?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(a,l,s){"confirm"===a?o.$http.post("wallet/backmgr/user/operatetUser.do",{userId:r.userId,optStatus:t}).then(function(t){o.$notify({title:"成功",message:e+" "+r.phone+" 成功",type:"success"}),o.getUserInfoList(),s()}):s()}})},addUser:function(){this.dialogTitle="创建用户",this.dialogFormVisible=!0,this.ruleForm={phone:"",pwd:"",nickName:""},this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},determine:function(){var t=this,e=this.ruleForm,r=e.phone,a=e.nickName,l=Object(o.a)(this.ruleForm.pwd);this.$http.post("wallet/backmgr/user/addUsers.do",{pwd:l,phone:r,nickName:a}).then(function(e){t.$notify({title:"成功",message:"创建用户 "+t.ruleForm.phone+" 成功",type:"success"}),t.dialogFormVisible=!1})}}},l={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"query"},[r("el-form",{ref:"filterForm",attrs:{inline:!0,"label-width":"80px",model:t.filterForm}},[r("sac-input",{ref:"phone",attrs:{label:"手机号",prop:"phone"},model:{value:t.filterForm.phone,callback:function(e){t.$set(t.filterForm,"phone","string"==typeof e?e.trim():e)},expression:"filterForm.phone"}}),t._v(" "),r("sac-submit-form",{on:{submitForm:function(e){t.submitForm(1)},resetForm:t.resetForm}})],1),t._v(" "),r("sac-table",{attrs:{data:t.listData.list}},[r("el-table-column",{attrs:{prop:"phone",label:"手机号码",width:"130"}}),t._v(" "),r("el-table-column",{attrs:{prop:"registTime",label:"注册时间"}}),t._v(" "),r("el-table-column",{attrs:{prop:"realName",label:"节点"}}),t._v(" "),r("el-table-column",{attrs:{prop:"nickName",label:"等级"}}),t._v(" "),r("el-table-column",{attrs:{prop:"cardNo",label:"PNB"}}),t._v(" "),r("el-table-column",{attrs:{prop:"cardNo",label:"SAC"}}),t._v(" "),r("el-table-column",{attrs:{prop:"cardNo",label:"PNB"}}),t._v(" "),r("el-table-column",{attrs:{prop:"cardNo",label:"PNB"}}),t._v(" "),r("el-table-column",{attrs:{prop:"cardNo",label:"PNB"}}),t._v(" "),r("el-table-column",{attrs:{label:"资金明细",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(r){t.goDetail(e.row.phone)}}},[t._v("查看详情")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"邀请详情",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(r){t.goInviteDetail(e.row.phone)}}},[t._v("查看详情")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.optStatus,expression:"scope.row.optStatus== 1"}],attrs:{size:"small",type:"success",plain:""},on:{click:function(r){t.optStatusChange(0,"解锁账号",e.row)}}},[t._v("解锁账号\n        ")]),t._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.optStatus,expression:"scope.row.optStatus== 0"}],attrs:{size:"small",type:"warning"},on:{click:function(r){t.optStatusChange(1,"锁定账号",e.row)}}},[t._v("锁定账号\n        ")])]}}])})],1),t._v(" "),r("sac-pagination",{directives:[{name:"show",rawName:"v-show",value:t.listData.list.length>0,expression:"listData.list.length>0"}],attrs:{total:+t.listData.total,"page-size":t.filterForm.pageSize,"current-page":t.filterForm.pageNum},on:{handleChange:t.getPaginationChange}})],1)},staticRenderFns:[]};var s=r("C7Lr")(a,l,!1,function(t){r("4Jhm")},null,null);e.default=s.exports},"4Jhm":function(t,e){}});